(()=>{var e={};e.id=528,e.ids=[528],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},91645:e=>{"use strict";e.exports=require("net")},33873:e=>{"use strict";e.exports=require("path")},11997:e=>{"use strict";e.exports=require("punycode")},27910:e=>{"use strict";e.exports=require("stream")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},74075:e=>{"use strict";e.exports=require("zlib")},87210:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var a=r(70260),n=r(28203),i=r(25155),s=r.n(i),l=r(67292),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d=["",{children:["admin",{children:["menu-management",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,60766)),"/Users/olatunde/Github/VisualMenu/app/admin/menu-management/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,94825)),"/Users/olatunde/Github/VisualMenu/app/admin/menu-management/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,54899)),"/Users/olatunde/Github/VisualMenu/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,19611)),"/Users/olatunde/Github/VisualMenu/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"]}],c=["/Users/olatunde/Github/VisualMenu/app/admin/menu-management/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/admin/menu-management/page",pathname:"/admin/menu-management",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4707:(e,t,r)=>{Promise.resolve().then(r.bind(r,60766))},70363:(e,t,r)=>{Promise.resolve().then(r.bind(r,20117))},96487:()=>{},78335:()=>{},20117:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>tC});var a=r(45512),n=r(58009),i=r(24559),s=r(87021),l=r(97643),o=r(25409),d=r(47699),c=r(48859),u=r(90898),m=r(44949),p=r(73258);let f=(0,p.A)("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);var x=r(5821),h=r(18741),g=r(16873);let y=(0,p.A)("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);var v=r(33680),b=r(44269),j=r(24849),w=r(3736);let N=(0,p.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var _=r(30829);let C=(0,n.createContext)({userRole:null,permissions:[],loading:!0,hasPermission:()=>!1,refreshPermissions:async()=>{}}),k=(0,p.A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var R=r(75339),M=r(77252),P=r(59462),A=r(31412),D=r(29952),S=r(6004),I=r(13024),L=r(30830),F=r(39217),E=r(59018),O=r(41675),z=r(19632),T=r(82534),G=r(30096),U=r(53337),q=r(80707),$=r(98060),B=r(48305),K=r(12705),V=r(92828),Z=r(72421),H=r(54669),W=["Enter"," "],X=["ArrowUp","PageDown","End"],J=["ArrowDown","PageUp","Home",...X],Q={ltr:[...W,"ArrowRight"],rtl:[...W,"ArrowLeft"]},Y={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ee="Menu",[et,er,ea]=(0,F.N)(ee),[en,ei]=(0,S.A)(ee,[ea,U.Bk,B.RG]),es=(0,U.Bk)(),el=(0,B.RG)(),[eo,ed]=en(ee),[ec,eu]=en(ee),em=e=>{let{__scopeMenu:t,open:r=!1,children:i,dir:s,onOpenChange:l,modal:o=!0}=e,d=es(t),[c,u]=n.useState(null),m=n.useRef(!1),p=(0,V.c)(l),f=(0,E.jH)(s);return n.useEffect(()=>{let e=()=>{m.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>m.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),(0,a.jsx)(U.bL,{...d,children:(0,a.jsx)(eo,{scope:t,open:r,onOpenChange:p,content:c,onContentChange:u,children:(0,a.jsx)(ec,{scope:t,onClose:n.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:m,dir:f,modal:o,children:i})})})};em.displayName=ee;var ep=n.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e,i=es(r);return(0,a.jsx)(U.Mz,{...i,...n,ref:t})});ep.displayName="MenuAnchor";var ef="MenuPortal",[ex,eh]=en(ef,{forceMount:void 0}),eg=e=>{let{__scopeMenu:t,forceMount:r,children:n,container:i}=e,s=ed(ef,t);return(0,a.jsx)(ex,{scope:t,forceMount:r,children:(0,a.jsx)($.C,{present:r||s.open,children:(0,a.jsx)(q.Z,{asChild:!0,container:i,children:n})})})};eg.displayName=ef;var ey="MenuContent",[ev,eb]=en(ey),ej=n.forwardRef((e,t)=>{let r=eh(ey,e.__scopeMenu),{forceMount:n=r.forceMount,...i}=e,s=ed(ey,e.__scopeMenu),l=eu(ey,e.__scopeMenu);return(0,a.jsx)(et.Provider,{scope:e.__scopeMenu,children:(0,a.jsx)($.C,{present:n||s.open,children:(0,a.jsx)(et.Slot,{scope:e.__scopeMenu,children:l.modal?(0,a.jsx)(ew,{...i,ref:t}):(0,a.jsx)(eN,{...i,ref:t})})})})}),ew=n.forwardRef((e,t)=>{let r=ed(ey,e.__scopeMenu),i=n.useRef(null),s=(0,D.s)(t,i);return n.useEffect(()=>{let e=i.current;if(e)return(0,Z.Eq)(e)},[]),(0,a.jsx)(e_,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:(0,A.m)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),eN=n.forwardRef((e,t)=>{let r=ed(ey,e.__scopeMenu);return(0,a.jsx)(e_,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),e_=n.forwardRef((e,t)=>{let{__scopeMenu:r,loop:i=!1,trapFocus:s,onOpenAutoFocus:l,onCloseAutoFocus:o,disableOutsidePointerEvents:d,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:m,onFocusOutside:p,onInteractOutside:f,onDismiss:x,disableOutsideScroll:h,...g}=e,y=ed(ey,r),v=eu(ey,r),b=es(r),j=el(r),w=er(r),[N,_]=n.useState(null),C=n.useRef(null),k=(0,D.s)(t,C,y.onContentChange),R=n.useRef(0),M=n.useRef(""),P=n.useRef(0),S=n.useRef(null),I=n.useRef("right"),L=n.useRef(0),F=h?H.A:n.Fragment,E=h?{as:K.DX,allowPinchZoom:!0}:void 0,G=e=>{let t=M.current+e,r=w().filter(e=>!e.disabled),a=document.activeElement,n=r.find(e=>e.ref.current===a)?.textValue,i=function(e,t,r){var a;let n=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,i=(a=Math.max(r?e.indexOf(r):-1,0),e.map((t,r)=>e[(a+r)%e.length]));1===n.length&&(i=i.filter(e=>e!==r));let s=i.find(e=>e.toLowerCase().startsWith(n.toLowerCase()));return s!==r?s:void 0}(r.map(e=>e.textValue),t,n),s=r.find(e=>e.textValue===i)?.ref.current;(function e(t){M.current=t,window.clearTimeout(R.current),""!==t&&(R.current=window.setTimeout(()=>e(""),1e3))})(t),s&&setTimeout(()=>s.focus())};n.useEffect(()=>()=>window.clearTimeout(R.current),[]),(0,z.Oh)();let q=n.useCallback(e=>I.current===S.current?.side&&function(e,t){return!!t&&function(e,t){let{x:r,y:a}=e,n=!1;for(let e=0,i=t.length-1;e<t.length;i=e++){let s=t[e].x,l=t[e].y,o=t[i].x,d=t[i].y;l>a!=d>a&&r<(o-s)*(a-l)/(d-l)+s&&(n=!n)}return n}({x:e.clientX,y:e.clientY},t)}(e,S.current?.area),[]);return(0,a.jsx)(ev,{scope:r,searchRef:M,onItemEnter:n.useCallback(e=>{q(e)&&e.preventDefault()},[q]),onItemLeave:n.useCallback(e=>{q(e)||(C.current?.focus(),_(null))},[q]),onTriggerLeave:n.useCallback(e=>{q(e)&&e.preventDefault()},[q]),pointerGraceTimerRef:P,onPointerGraceIntentChange:n.useCallback(e=>{S.current=e},[]),children:(0,a.jsx)(F,{...E,children:(0,a.jsx)(T.n,{asChild:!0,trapped:s,onMountAutoFocus:(0,A.m)(l,e=>{e.preventDefault(),C.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:(0,a.jsx)(O.qW,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:u,onPointerDownOutside:m,onFocusOutside:p,onInteractOutside:f,onDismiss:x,children:(0,a.jsx)(B.bL,{asChild:!0,...j,dir:v.dir,orientation:"vertical",loop:i,currentTabStopId:N,onCurrentTabStopIdChange:_,onEntryFocus:(0,A.m)(c,e=>{v.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,a.jsx)(U.UC,{role:"menu","aria-orientation":"vertical","data-state":eX(y.open),"data-radix-menu-content":"",dir:v.dir,...b,...g,ref:k,style:{outline:"none",...g.style},onKeyDown:(0,A.m)(g.onKeyDown,e=>{let t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,r=e.ctrlKey||e.altKey||e.metaKey,a=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!r&&a&&G(e.key));let n=C.current;if(e.target!==n||!J.includes(e.key))return;e.preventDefault();let i=w().filter(e=>!e.disabled).map(e=>e.ref.current);X.includes(e.key)&&i.reverse(),function(e){let t=document.activeElement;for(let r of e)if(r===t||(r.focus(),document.activeElement!==t))return}(i)}),onBlur:(0,A.m)(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(R.current),M.current="")}),onPointerMove:(0,A.m)(e.onPointerMove,eY(e=>{let t=e.target,r=L.current!==e.clientX;if(e.currentTarget.contains(t)&&r){let t=e.clientX>L.current?"right":"left";I.current=t,L.current=e.clientX}}))})})})})})})});ej.displayName=ey;var eC=n.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e;return(0,a.jsx)(L.sG.div,{role:"group",...n,ref:t})});eC.displayName="MenuGroup";var ek=n.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e;return(0,a.jsx)(L.sG.div,{...n,ref:t})});ek.displayName="MenuLabel";var eR="MenuItem",eM="menu.itemSelect",eP=n.forwardRef((e,t)=>{let{disabled:r=!1,onSelect:i,...s}=e,l=n.useRef(null),o=eu(eR,e.__scopeMenu),d=eb(eR,e.__scopeMenu),c=(0,D.s)(t,l),u=n.useRef(!1);return(0,a.jsx)(eA,{...s,ref:c,disabled:r,onClick:(0,A.m)(e.onClick,()=>{let e=l.current;if(!r&&e){let t=new CustomEvent(eM,{bubbles:!0,cancelable:!0});e.addEventListener(eM,e=>i?.(e),{once:!0}),(0,L.hO)(e,t),t.defaultPrevented?u.current=!1:o.onClose()}}),onPointerDown:t=>{e.onPointerDown?.(t),u.current=!0},onPointerUp:(0,A.m)(e.onPointerUp,e=>{u.current||e.currentTarget?.click()}),onKeyDown:(0,A.m)(e.onKeyDown,e=>{let t=""!==d.searchRef.current;!r&&(!t||" "!==e.key)&&W.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});eP.displayName=eR;var eA=n.forwardRef((e,t)=>{let{__scopeMenu:r,disabled:i=!1,textValue:s,...l}=e,o=eb(eR,r),d=el(r),c=n.useRef(null),u=(0,D.s)(t,c),[m,p]=n.useState(!1),[f,x]=n.useState("");return n.useEffect(()=>{let e=c.current;e&&x((e.textContent??"").trim())},[l.children]),(0,a.jsx)(et.ItemSlot,{scope:r,disabled:i,textValue:s??f,children:(0,a.jsx)(B.q7,{asChild:!0,...d,focusable:!i,children:(0,a.jsx)(L.sG.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...l,ref:u,onPointerMove:(0,A.m)(e.onPointerMove,eY(e=>{i?o.onItemLeave(e):(o.onItemEnter(e),e.defaultPrevented||e.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:(0,A.m)(e.onPointerLeave,eY(e=>o.onItemLeave(e))),onFocus:(0,A.m)(e.onFocus,()=>p(!0)),onBlur:(0,A.m)(e.onBlur,()=>p(!1))})})})}),eD=n.forwardRef((e,t)=>{let{checked:r=!1,onCheckedChange:n,...i}=e;return(0,a.jsx)(eT,{scope:e.__scopeMenu,checked:r,children:(0,a.jsx)(eP,{role:"menuitemcheckbox","aria-checked":eJ(r)?"mixed":r,...i,ref:t,"data-state":eQ(r),onSelect:(0,A.m)(i.onSelect,()=>n?.(!!eJ(r)||!r),{checkForDefaultPrevented:!1})})})});eD.displayName="MenuCheckboxItem";var eS="MenuRadioGroup",[eI,eL]=en(eS,{value:void 0,onValueChange:()=>{}}),eF=n.forwardRef((e,t)=>{let{value:r,onValueChange:n,...i}=e,s=(0,V.c)(n);return(0,a.jsx)(eI,{scope:e.__scopeMenu,value:r,onValueChange:s,children:(0,a.jsx)(eC,{...i,ref:t})})});eF.displayName=eS;var eE="MenuRadioItem",eO=n.forwardRef((e,t)=>{let{value:r,...n}=e,i=eL(eE,e.__scopeMenu),s=r===i.value;return(0,a.jsx)(eT,{scope:e.__scopeMenu,checked:s,children:(0,a.jsx)(eP,{role:"menuitemradio","aria-checked":s,...n,ref:t,"data-state":eQ(s),onSelect:(0,A.m)(n.onSelect,()=>i.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});eO.displayName=eE;var ez="MenuItemIndicator",[eT,eG]=en(ez,{checked:!1}),eU=n.forwardRef((e,t)=>{let{__scopeMenu:r,forceMount:n,...i}=e,s=eG(ez,r);return(0,a.jsx)($.C,{present:n||eJ(s.checked)||!0===s.checked,children:(0,a.jsx)(L.sG.span,{...i,ref:t,"data-state":eQ(s.checked)})})});eU.displayName=ez;var eq=n.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e;return(0,a.jsx)(L.sG.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});eq.displayName="MenuSeparator";var e$=n.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e,i=es(r);return(0,a.jsx)(U.i3,{...i,...n,ref:t})});e$.displayName="MenuArrow";var[eB,eK]=en("MenuSub"),eV="MenuSubTrigger",eZ=n.forwardRef((e,t)=>{let r=ed(eV,e.__scopeMenu),i=eu(eV,e.__scopeMenu),s=eK(eV,e.__scopeMenu),l=eb(eV,e.__scopeMenu),o=n.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:c}=l,u={__scopeMenu:e.__scopeMenu},m=n.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return n.useEffect(()=>m,[m]),n.useEffect(()=>{let e=d.current;return()=>{window.clearTimeout(e),c(null)}},[d,c]),(0,a.jsx)(ep,{asChild:!0,...u,children:(0,a.jsx)(eA,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":eX(r.open),...e,ref:(0,D.t)(t,s.onTriggerChange),onClick:t=>{e.onClick?.(t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:(0,A.m)(e.onPointerMove,eY(t=>{l.onItemEnter(t),t.defaultPrevented||e.disabled||r.open||o.current||(l.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),m()},100))})),onPointerLeave:(0,A.m)(e.onPointerLeave,eY(e=>{m();let t=r.content?.getBoundingClientRect();if(t){let a=r.content?.dataset.side,n="right"===a,i=t[n?"left":"right"],s=t[n?"right":"left"];l.onPointerGraceIntentChange({area:[{x:e.clientX+(n?-5:5),y:e.clientY},{x:i,y:t.top},{x:s,y:t.top},{x:s,y:t.bottom},{x:i,y:t.bottom}],side:a}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>l.onPointerGraceIntentChange(null),300)}else{if(l.onTriggerLeave(e),e.defaultPrevented)return;l.onPointerGraceIntentChange(null)}})),onKeyDown:(0,A.m)(e.onKeyDown,t=>{let a=""!==l.searchRef.current;!e.disabled&&(!a||" "!==t.key)&&Q[i.dir].includes(t.key)&&(r.onOpenChange(!0),r.content?.focus(),t.preventDefault())})})})});eZ.displayName=eV;var eH="MenuSubContent",eW=n.forwardRef((e,t)=>{let r=eh(ey,e.__scopeMenu),{forceMount:i=r.forceMount,...s}=e,l=ed(ey,e.__scopeMenu),o=eu(ey,e.__scopeMenu),d=eK(eH,e.__scopeMenu),c=n.useRef(null),u=(0,D.s)(t,c);return(0,a.jsx)(et.Provider,{scope:e.__scopeMenu,children:(0,a.jsx)($.C,{present:i||l.open,children:(0,a.jsx)(et.Slot,{scope:e.__scopeMenu,children:(0,a.jsx)(e_,{id:d.contentId,"aria-labelledby":d.triggerId,...s,ref:u,align:"start",side:"rtl"===o.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{o.isUsingKeyboardRef.current&&c.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:(0,A.m)(e.onFocusOutside,e=>{e.target!==d.trigger&&l.onOpenChange(!1)}),onEscapeKeyDown:(0,A.m)(e.onEscapeKeyDown,e=>{o.onClose(),e.preventDefault()}),onKeyDown:(0,A.m)(e.onKeyDown,e=>{let t=e.currentTarget.contains(e.target),r=Y[o.dir].includes(e.key);t&&r&&(l.onOpenChange(!1),d.trigger?.focus(),e.preventDefault())})})})})})});function eX(e){return e?"open":"closed"}function eJ(e){return"indeterminate"===e}function eQ(e){return eJ(e)?"indeterminate":e?"checked":"unchecked"}function eY(e){return t=>"mouse"===t.pointerType?e(t):void 0}eW.displayName=eH;var e0="DropdownMenu",[e1,e2]=(0,S.A)(e0,[ei]),e4=ei(),[e5,e8]=e1(e0),e3=e=>{let{__scopeDropdownMenu:t,children:r,dir:i,open:s,defaultOpen:l,onOpenChange:o,modal:d=!0}=e,c=e4(t),u=n.useRef(null),[m=!1,p]=(0,I.i)({prop:s,defaultProp:l,onChange:o});return(0,a.jsx)(e5,{scope:t,triggerId:(0,G.B)(),triggerRef:u,contentId:(0,G.B)(),open:m,onOpenChange:p,onOpenToggle:n.useCallback(()=>p(e=>!e),[p]),modal:d,children:(0,a.jsx)(em,{...c,open:m,onOpenChange:p,dir:i,modal:d,children:r})})};e3.displayName=e0;var e9="DropdownMenuTrigger",e6=n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,disabled:n=!1,...i}=e,s=e8(e9,r),l=e4(r);return(0,a.jsx)(ep,{asChild:!0,...l,children:(0,a.jsx)(L.sG.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...i,ref:(0,D.t)(t,s.triggerRef),onPointerDown:(0,A.m)(e.onPointerDown,e=>{n||0!==e.button||!1!==e.ctrlKey||(s.onOpenToggle(),s.open||e.preventDefault())}),onKeyDown:(0,A.m)(e.onKeyDown,e=>{!n&&(["Enter"," "].includes(e.key)&&s.onOpenToggle(),"ArrowDown"===e.key&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});e6.displayName=e9;var e7=e=>{let{__scopeDropdownMenu:t,...r}=e,n=e4(t);return(0,a.jsx)(eg,{...n,...r})};e7.displayName="DropdownMenuPortal";var te="DropdownMenuContent",tt=n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...i}=e,s=e8(te,r),l=e4(r),o=n.useRef(!1);return(0,a.jsx)(ej,{id:s.contentId,"aria-labelledby":s.triggerId,...l,...i,ref:t,onCloseAutoFocus:(0,A.m)(e.onCloseAutoFocus,e=>{o.current||s.triggerRef.current?.focus(),o.current=!1,e.preventDefault()}),onInteractOutside:(0,A.m)(e.onInteractOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,a=2===t.button||r;(!s.modal||a)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});tt.displayName=te,n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=e4(r);return(0,a.jsx)(eC,{...i,...n,ref:t})}).displayName="DropdownMenuGroup";var tr=n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=e4(r);return(0,a.jsx)(ek,{...i,...n,ref:t})});tr.displayName="DropdownMenuLabel";var ta=n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=e4(r);return(0,a.jsx)(eP,{...i,...n,ref:t})});ta.displayName="DropdownMenuItem";var tn=n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=e4(r);return(0,a.jsx)(eD,{...i,...n,ref:t})});tn.displayName="DropdownMenuCheckboxItem",n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=e4(r);return(0,a.jsx)(eF,{...i,...n,ref:t})}).displayName="DropdownMenuRadioGroup";var ti=n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=e4(r);return(0,a.jsx)(eO,{...i,...n,ref:t})});ti.displayName="DropdownMenuRadioItem";var ts=n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=e4(r);return(0,a.jsx)(eU,{...i,...n,ref:t})});ts.displayName="DropdownMenuItemIndicator";var tl=n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=e4(r);return(0,a.jsx)(eq,{...i,...n,ref:t})});tl.displayName="DropdownMenuSeparator",n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=e4(r);return(0,a.jsx)(e$,{...i,...n,ref:t})}).displayName="DropdownMenuArrow";var to=n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=e4(r);return(0,a.jsx)(eZ,{...i,...n,ref:t})});to.displayName="DropdownMenuSubTrigger";var td=n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=e4(r);return(0,a.jsx)(eW,{...i,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});td.displayName="DropdownMenuSubContent";var tc=r(99905);let tu=(0,p.A)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);n.forwardRef(({className:e,inset:t,children:r,...n},i)=>(0,a.jsxs)(to,{ref:i,className:(0,P.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,(0,a.jsx)(tc.A,{className:"ml-auto h-4 w-4"})]})).displayName=to.displayName,n.forwardRef(({className:e,...t},r)=>(0,a.jsx)(td,{ref:r,className:(0,P.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=td.displayName;let tm=n.forwardRef(({className:e,sideOffset:t=4,...r},n)=>(0,a.jsx)(e7,{children:(0,a.jsx)(tt,{ref:n,sideOffset:t,className:(0,P.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));tm.displayName=tt.displayName,n.forwardRef(({className:e,inset:t,...r},n)=>(0,a.jsx)(ta,{ref:n,className:(0,P.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r})).displayName=ta.displayName;let tp=n.forwardRef(({className:e,children:t,checked:r,...n},i)=>(0,a.jsxs)(tn,{ref:i,className:(0,P.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(ts,{children:(0,a.jsx)(j.A,{className:"h-4 w-4"})})}),t]}));tp.displayName=tn.displayName,n.forwardRef(({className:e,children:t,...r},n)=>(0,a.jsxs)(ti,{ref:n,className:(0,P.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(ts,{children:(0,a.jsx)(tu,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=ti.displayName;let tf=n.forwardRef(({className:e,inset:t,...r},n)=>(0,a.jsx)(tr,{ref:n,className:(0,P.cn)("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));tf.displayName=tr.displayName;let tx=n.forwardRef(({className:e,...t},r)=>(0,a.jsx)(tl,{ref:r,className:(0,P.cn)("-mx-1 my-1 h-px bg-muted",e),...t}));tx.displayName=tl.displayName;var th=r(54170),tg=r(72075),ty=r(67484),tv=r(22403),tb=r(86256),tj=r.n(tb),tw=r(79334);let tN=tj()(async()=>{},{loadableGenerated:{modules:["app/admin/menu-management/page.tsx -> @/components/menu/sortable-menu-list"]},ssr:!1}),t_={dietary:[],categories:[],availability:"all",priceRange:{min:null,max:null}};function tC(){var e;(0,tw.useRouter)();let{user:t,loading:r}=(0,_.A)(),{hasPermission:p,loading:A}=function(){let e=(0,n.useContext)(C);if(!e)throw Error("usePermissions must be used within a PermissionProvider");return e}(),[D,S]=(0,n.useState)(!1),[I,L]=(0,n.useState)([]),[F,E]=(0,n.useState)(!0),[O,z]=(0,n.useState)(""),[T,G]=(0,n.useState)(null),[U,q]=(0,n.useState)(!1),[$,B]=(0,n.useState)([]),[K,V]=(0,n.useState)(null),[Z,H]=(0,n.useState)(""),[W,X]=(0,n.useState)({name:"",description:"",price:"",category:"",image_url:null,dietary_info:[],is_available:!0,special_offer:null}),[J,Q]=(0,n.useState)("idle"),[Y,ee]=(0,n.useState)(""),[et,er]=(0,n.useState)(t_),[ea,en]=(0,n.useState)(!1),[ei,es]=(0,n.useState)(new Set),[el,eo]=(0,n.useState)(!1),[ed,ec]=(0,n.useState)(!1),[eu,em]=(0,n.useState)(!1),[ep,ef]=(0,n.useState)({}),[ex,eh]=(0,n.useState)("grid"),eg=(0,i.U)();(0,th.FR)((0,th.MS)(th.cA,{activationConstraint:{distance:8}}),(0,th.MS)(th.IG,{activationConstraint:{delay:200,tolerance:8}}));let ey=async()=>{try{E(!0),z(""),console.log("Loading menu items...");let{data:e,error:t}=await eg.from("menu_items").select("*").order("order",{ascending:!0}).order("created_at",{ascending:!1});if(t)throw console.error("Error loading menu items:",t),t;if(!e){console.log("No menu items found"),L([]);return}console.log("Raw menu items from database:",e);let r=e.map(e=>{console.log(`Processing item ${e.id}:`,{originalPrice:e.price,originalType:typeof e.price});let t={id:e.id,name:e.name,description:e.description||"",price:parseFloat(e.price.toString()),category_id:e.category||"",image_url:e.image_url||null,image_path:null,is_available:e.is_available,dietary_info:e.dietary_info||[],created_at:new Date().toISOString(),updated_at:new Date().toISOString(),portion_sizes:[],customization_options:[]};return console.log(`Processed item ${e.id}:`,{processedPrice:t.price,processedType:typeof t.price}),t});console.log("Final validated menu items:",r),L(r)}catch(e){console.error("Error loading menu items:",e),z(e.message||"Failed to load menu items"),L([])}finally{E(!1)}},ev="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIGZpbGw9IiNFNUU3RUIiLz48cGF0aCBkPSJNNDAgNDBINjBNNTAgMzBWNTAiIHN0cm9rZT0iIzlDQTNCOCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48L3N2Zz4=",eb="images",ej=async e=>{try{Q("uploading");let t=e.name.split(".").pop(),r=`${Date.now()}.${t}`,{error:a}=await eg.storage.from(eb).upload(r,e);if(a)return console.error("Upload error:",a),Q("error"),tv.oR.error("Failed to upload image"),null;let{data:{publicUrl:n}}=eg.storage.from(eb).getPublicUrl(r);return Q("success"),n}catch(e){return console.error("Upload error:",e),Q("error"),tv.oR.error("Failed to upload image"),null}},ew=async()=>{try{let e=W.image_url;K&&(console.log("Uploading new image..."),e=await ej(K),console.log("New image URL:",e));let t={name:W.name,description:W.description||"",price:parseFloat(W.price),category_id:W.category,image_url:e,dietary_info:W.dietary_info||[],is_available:W.is_available,special_offer:W.special_offer};if(console.log("Saving item with data:",t),T){let{error:e}=await eg.from("menu_items").update(t).eq("id",T);if(e)throw e}else{let{error:e}=await eg.from("menu_items").insert([t]);if(e)throw e}await ey(),e_()}catch(e){console.error("Save failed:",e),z(e.message)}};async function eN(e){try{let{error:t}=await eg.from("menu_items").delete().eq("id",e);if(t)throw t;ey()}catch(e){console.error("Error deleting menu item:",e),z("Failed to delete menu item")}}let e_=()=>{V(null),H(""),X({name:"",description:"",price:"",category:"",image_url:null,dietary_info:[],is_available:!0,special_offer:null}),G(null)},eC=I.filter(e=>{let t=""===Y||e.name.toLowerCase().includes(Y.toLowerCase())||(e.description?.toLowerCase()||"").includes(Y.toLowerCase())||(e.category_id?.toLowerCase()||"").includes(Y.toLowerCase()),r=0===et.categories.length||e.category_id&&et.categories.includes(e.category_id),a=0===et.dietary.length||Array.isArray(e.dietary_info)&&e.dietary_info.some(e=>"string"==typeof e&&et.dietary.includes(e)),n="all"===et.availability||"available"===et.availability&&e.is_available||"unavailable"===et.availability&&!e.is_available,i=parseFloat(e.price.toString()),s=(null===et.priceRange.min||i>=et.priceRange.min)&&(null===et.priceRange.max||i<=et.priceRange.max);return t&&r&&a&&n&&s}),ek=Array.from(new Set(I.flatMap(e=>e.dietary_info||[]).filter(e=>"string"==typeof e&&""!==e))).sort(),eR=(e,t)=>{let r=new Set(ei);t?r.add(e):r.delete(e),es(r)},eM=async()=>{if(ei.size)try{ec(!0),console.log("Deleting items:",Array.from(ei));let{error:e}=await eg.from("menu_items").delete().in("id",Array.from(ei));if(e)throw e;await ey(),es(new Set)}catch(e){console.error("Failed to delete items:",e),z(`Failed to delete items: ${e.message}`)}finally{ec(!1)}},eP=async()=>{if(ei.size&&Object.keys(ep).length)try{eo(!0),console.log("Updating items:",Array.from(ei),"with data:",ep);let{error:e}=await eg.from("menu_items").update(ep).in("id",Array.from(ei));if(e)throw e;await ey(),es(new Set),em(!1),ef({})}catch(e){console.error("Failed to update items:",e),z(`Failed to update items: ${e.message}`)}finally{eo(!1)}},eA=async e=>{try{console.log("Updating item order...");let t=e.map((e,t)=>({id:e.id,name:e.name,description:e.description||"",price:parseFloat(e.price.toString()),category_id:e.category_id,order:t+1}));console.log("Updates to be applied:",t);let{data:r,error:a}=await eg.from("menu_items").upsert(t,{onConflict:"id",ignoreDuplicates:!1});if(a)throw console.error("Error updating item order:",a),a;console.log("Order update successful:",r)}catch(e){console.error("Failed to update item order:",e),z("Failed to update item order"),ey()}},eD=e=>{er(t=>{let r=t.dietary.filter(e=>"string"==typeof e);return{...t,dietary:r.includes(e)?r.filter(t=>t!==e):[...r,e]}})};return!D||r||A?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,a.jsx)(m.A,{className:"h-8 w-8 animate-spin text-primary"})}):t?O?(0,a.jsx)("div",{className:"container mx-auto p-6",children:(0,a.jsxs)(R.Fc,{variant:"destructive",className:"mb-6",children:[(0,a.jsx)(k,{className:"h-4 w-4"}),(0,a.jsx)(R.XL,{children:"Error"}),(0,a.jsxs)(R.TN,{className:"flex flex-col gap-2",children:[(0,a.jsx)("p",{children:O}),(0,a.jsx)(s.$,{variant:"outline",size:"sm",onClick:()=>{z(""),ey()},children:"Try Again"})]})]})}):F?(0,a.jsx)("div",{className:"container mx-auto p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)(m.A,{className:"h-6 w-6 animate-spin"}),(0,a.jsx)("span",{children:"Loading menu items..."})]})}):(0,a.jsxs)("div",{className:"container mx-auto p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Menu Management"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"border rounded-md p-1 flex items-center",children:[(0,a.jsx)(s.$,{variant:"ghost",size:"sm",className:(0,P.cn)("px-2 py-1","grid"===ex&&"bg-muted"),onClick:()=>eh("grid"),children:(0,a.jsx)(f,{className:"h-4 w-4"})}),(0,a.jsx)(s.$,{variant:"ghost",size:"sm",className:(0,P.cn)("px-2 py-1","list"===ex&&"bg-muted"),onClick:()=>eh("list"),children:(0,a.jsx)(x.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)(s.$,{onClick:()=>{q(!0),G(null),X({name:"",description:"",price:"",category:"",image_url:null,dietary_info:[],is_available:!0,special_offer:null}),V(null),H("")},children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Add Item"]})]})]}),(0,a.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(g.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)(o.p,{id:"menu-search",placeholder:"Search menu items... (Ctrl + K)",value:Y,onChange:e=>ee(e.target.value),className:"pl-10"}),Y&&(0,a.jsx)(s.$,{variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-6",onClick:()=>ee(""),children:"Clear"})]}),(0,a.jsxs)(e3,{children:[(0,a.jsx)(e6,{asChild:!0,children:(0,a.jsxs)(s.$,{variant:"outline",className:"relative",children:[(0,a.jsx)(y,{className:"h-4 w-4 mr-2"}),"Filters",(et.categories.length>0||et.dietary.length>0||"all"!==et.availability||null!==et.priceRange.min||null!==et.priceRange.max)&&(0,a.jsx)(M.E,{variant:"secondary",className:"ml-2 h-5 w-5 p-0 flex items-center justify-center",children:et.categories.length+et.dietary.length+("all"!==et.availability?1:0)+(null!==et.priceRange.min||null!==et.priceRange.max?1:0)})]})}),(0,a.jsxs)(tm,{className:"w-72",children:[(0,a.jsxs)(tf,{className:"flex items-center justify-between",children:["Categories",ea&&(0,a.jsx)(m.A,{className:"h-4 w-4 animate-spin"})]}),(0,a.jsx)("div",{className:"max-h-48 overflow-y-auto",children:$.map(e=>(0,a.jsx)(tp,{checked:et.categories.includes(e),onCheckedChange:t=>{er(r=>({...r,categories:t?[...r.categories,e]:r.categories.filter(t=>t!==e)}))},children:(0,a.jsxs)("span",{className:"flex items-center justify-between w-full",children:[e,(0,a.jsx)(M.E,{variant:"secondary",className:"ml-2",children:I.filter(t=>t.category_id===e).length})]})},e))}),(0,a.jsx)(tx,{}),(0,a.jsx)(tf,{children:"Dietary Options"}),(0,a.jsx)("div",{className:"max-h-48 overflow-y-auto",children:ek.map(e=>(0,a.jsx)(tp,{checked:et.dietary.includes(e),onCheckedChange:()=>{"string"==typeof e&&eD(e)},children:e},e))}),(0,a.jsx)(tx,{}),(0,a.jsx)(tf,{children:"Availability"}),(0,a.jsx)("div",{className:"p-2",children:(0,a.jsxs)("select",{value:et.availability,onChange:e=>er(t=>({...t,availability:e.target.value})),className:"w-full rounded-md border border-input bg-background px-3 py-1 text-sm",children:[(0,a.jsx)("option",{value:"all",children:"All Items"}),(0,a.jsx)("option",{value:"available",children:"Available Only"}),(0,a.jsx)("option",{value:"unavailable",children:"Unavailable Only"})]})}),(0,a.jsx)(tx,{}),(0,a.jsx)(tf,{children:"Price Range"}),(0,a.jsx)("div",{className:"p-2 space-y-2",children:(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)(o.p,{type:"number",placeholder:"Min",value:et.priceRange.min??"",onChange:e=>er(t=>({...t,priceRange:{...t.priceRange,min:e.target.value?parseFloat(e.target.value):null}})),className:"w-24"}),(0,a.jsx)("span",{children:"to"}),(0,a.jsx)(o.p,{type:"number",placeholder:"Max",value:et.priceRange.max??"",onChange:e=>er(t=>({...t,priceRange:{...t.priceRange,max:e.target.value?parseFloat(e.target.value):null}})),className:"w-24"})]})}),(0,a.jsx)(tx,{}),(0,a.jsx)("div",{className:"p-2",children:(0,a.jsx)(s.$,{variant:"outline",size:"sm",className:"w-full",onClick:()=>er(t_),children:"Reset All Filters"})})]})]})]}),(et.categories.length>0||et.dietary.length>0||"all"!==et.availability||null!==et.priceRange.min||null!==et.priceRange.max)&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Active filters:"}),et.categories.map(e=>(0,a.jsxs)(M.E,{variant:"secondary",className:"cursor-pointer hover:bg-secondary/80",onClick:()=>er(t=>({...t,categories:t.categories.filter(t=>t!==e)})),children:[e," \xd7"]},e)),et.dietary.map(e=>(0,a.jsxs)(M.E,{variant:"secondary",className:"cursor-pointer hover:bg-secondary/80",onClick:()=>eD(e),children:[e," \xd7"]},e)),"all"!==et.availability&&(0,a.jsxs)(M.E,{variant:"secondary",className:"cursor-pointer hover:bg-secondary/80",onClick:()=>er(e=>({...e,availability:"all"})),children:["available"===et.availability?"Available":"Unavailable"," \xd7"]}),(null!==et.priceRange.min||null!==et.priceRange.max)&&(0,a.jsxs)(M.E,{variant:"secondary",className:"cursor-pointer hover:bg-secondary/80",onClick:()=>er(e=>({...e,priceRange:{min:null,max:null}})),children:["$",et.priceRange.min??"0"," - $",et.priceRange.max??"∞"," \xd7"]}),(0,a.jsx)(s.$,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground",onClick:()=>er(t_),children:"Clear all"})]}),0===eC.length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-muted mb-4",children:(0,a.jsx)(g.A,{className:"h-6 w-6 text-muted-foreground"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-1",children:"No menu items found"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search or filters to find what you're looking for."}),(0,a.jsx)(s.$,{variant:"outline",onClick:()=>{ee(""),er(t_)},children:"Reset all filters"})]})]}),O&&(0,a.jsxs)(R.Fc,{variant:"destructive",className:"mb-6",children:[(0,a.jsx)(k,{className:"h-4 w-4"}),(0,a.jsx)(R.XL,{children:"Error"}),(0,a.jsx)(R.TN,{children:O})]}),(U||T)&&(0,a.jsxs)(l.Zp,{className:"mb-6",children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{children:T?"Edit Item":"New Item"})}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("form",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Label,{htmlFor:"name",children:"Name"}),(0,a.jsx)(o.p,{id:"name",value:W.name,onChange:e=>X({...W,name:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Label,{htmlFor:"category",children:"Category"}),(0,a.jsxs)("select",{id:"category",value:W.category,onChange:e=>X({...W,category:e.target.value}),className:"w-full rounded-md border border-input bg-background px-3 py-2",children:[(0,a.jsx)("option",{value:"",children:"Select a category"}),$.map(e=>(0,a.jsx)("option",{value:e,children:e},e)),(0,a.jsx)("option",{value:"new",children:"+ Add new category"})]})]}),"new"===W.category&&(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Label,{htmlFor:"newCategory",children:"New Category Name"}),(0,a.jsx)(o.p,{id:"newCategory",value:W.category,onChange:e=>X({...W,category:e.target.value}),placeholder:"Enter new category name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Label,{htmlFor:"price",children:"Price"}),(0,a.jsx)(o.p,{id:"price",type:"number",step:"0.01",value:W.price,onChange:e=>X({...W,price:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Label,{htmlFor:"available",children:"Availability"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"available",checked:W.is_available,onChange:e=>X({...W,is_available:e.target.checked}),className:"rounded border-gray-300"}),(0,a.jsx)("span",{children:"Item is available"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Label,{htmlFor:"description",children:"Description"}),(0,a.jsx)(c.T,{id:"description",value:W.description,onChange:e=>X({...W,description:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Label,{htmlFor:"image",children:"Image"}),(0,a.jsxs)("div",{className:"mt-1 flex items-center space-x-4",children:[(Z||W.image_url)&&(0,a.jsxs)("div",{className:"relative w-24 h-24",children:["uploading"===J&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-md z-10",children:(0,a.jsx)(m.A,{className:"h-6 w-6 animate-spin text-white"})}),(0,a.jsx)(ty.default,{src:(e=Z||W.image_url)?e:ev,alt:"Preview",width:100,height:100,className:"rounded-md object-cover w-full h-full",onError:e=>{console.error("Image load error:",Z||W.image_url),e.target.src=ev},unoptimized:!!(Z||W.image_url)?.startsWith("data:"),priority:!0})]}),(0,a.jsx)(o.p,{id:"image",type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(t){if(!t.type.startsWith("image/")){z("Please select an image file");return}if(t.size>5242880){z("Image size should be less than 5MB");return}V(t);let e=URL.createObjectURL(t);return H(e),X(e=>({...e,image_url:null})),()=>URL.revokeObjectURL(e)}}})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Label,{htmlFor:"dietary",children:"Dietary Information"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-1",children:["Vegetarian","Vegan","Gluten-Free","Dairy-Free","Halal","Kosher","Nut-Free"].map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:W.dietary_info?.includes(e),onChange:t=>{let r=t.target.checked?[...W.dietary_info||[],e]:(W.dietary_info||[]).filter(t=>t!==e);X({...W,dietary_info:r})},className:"rounded border-gray-300"}),(0,a.jsx)("span",{children:e})]},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Label,{children:"Special Offer"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Label,{htmlFor:"discountPrice",children:"Discount Price"}),(0,a.jsx)(o.p,{id:"discountPrice",type:"number",step:"0.01",value:W.special_offer?.discount_price||"",onChange:e=>X({...W,special_offer:{...W.special_offer,discount_price:parseFloat(e.target.value)}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Label,{htmlFor:"startDate",children:"Start Date"}),(0,a.jsx)(o.p,{id:"startDate",type:"date",value:W.special_offer?.start_date||"",onChange:e=>X({...W,special_offer:{...W.special_offer,start_date:e.target.value}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Label,{htmlFor:"endDate",children:"End Date"}),(0,a.jsx)(o.p,{id:"endDate",type:"date",value:W.special_offer?.end_date||"",onChange:e=>X({...W,special_offer:{...W.special_offer,end_date:e.target.value}})})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(s.$,{variant:"outline",onClick:()=>{q(!1),G(null),V(null),H("")},children:"Cancel"}),(0,a.jsxs)(s.$,{onClick:ew,children:[(0,a.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Save"]})]})]})})]}),ei.size>0&&(0,a.jsxs)("div",{className:"sticky top-0 z-10 bg-background border-b mb-6 p-4 flex items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.S,{checked:ei.size===eC.length,onCheckedChange:e=>{e?es(new Set(eC.map(e=>e.id))):es(new Set)}}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:[ei.size," item",1!==ei.size?"s":""," selected"]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:eu?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("select",{value:ep.category||"",onChange:e=>ef(t=>({...t,category:e.target.value||void 0})),className:"h-9 rounded-md border border-input bg-background px-3 text-sm",children:[(0,a.jsx)("option",{value:"",children:"Update Category..."}),$.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{value:void 0===ep.is_available?"":String(ep.is_available),onChange:e=>ef(t=>({...t,is_available:""===e.target.value?void 0:"true"===e.target.value})),className:"h-9 rounded-md border border-input bg-background px-3 text-sm",children:[(0,a.jsx)("option",{value:"",children:"Update Availability..."}),(0,a.jsx)("option",{value:"true",children:"Available"}),(0,a.jsx)("option",{value:"false",children:"Unavailable"})]}),(0,a.jsxs)(s.$,{variant:"outline",size:"sm",onClick:()=>{em(!1),ef({})},children:[(0,a.jsx)(b.A,{className:"h-4 w-4 mr-1"}),"Cancel"]}),(0,a.jsxs)(s.$,{size:"sm",onClick:eP,disabled:!Object.keys(ep).length||el,children:[el?(0,a.jsx)(m.A,{className:"h-4 w-4 mr-1 animate-spin"}):(0,a.jsx)(j.A,{className:"h-4 w-4 mr-1"}),"Update ",ei.size," items"]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.$,{variant:"outline",size:"sm",onClick:()=>em(!0),children:[(0,a.jsx)(w.A,{className:"h-4 w-4 mr-1"}),"Batch Edit"]}),(0,a.jsxs)(s.$,{variant:"destructive",size:"sm",onClick:eM,disabled:ed,children:[ed?(0,a.jsx)(m.A,{className:"h-4 w-4 mr-1 animate-spin"}):(0,a.jsx)(N,{className:"h-4 w-4 mr-1"}),"Delete ",ei.size," items"]})]})})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(tN,{items:eC,loading:F,viewMode:ex,selectedItems:ei,imageLoading:"uploading"===J,onDragEnd:e=>{let{active:t,over:r}=e;if(r&&t.id!==r.id){let e=I.findIndex(e=>e.id===t.id),a=I.findIndex(e=>e.id===r.id),n=(0,tg.be)(I,e,a);L(n),eA(n)}},onSelectItem:(e,t)=>eR(e,t),onEditItem:e=>{if(!e)return;let t=e.dietary_info?.filter(e=>"string"==typeof e)??[],r={...e,dietary_info:t};G(r.id),X({name:r.name,description:r.description||"",price:r.price.toString(),category:r.category_id||"",image_url:r.image_url||null,dietary_info:t,is_available:r.is_available,special_offer:null})},onDeleteItem:eN,onImageLoad:()=>Q("success"),onImageError:()=>Q("error")})})]}):null}},77252:(e,t,r)=>{"use strict";r.d(t,{E:()=>l});var a=r(45512);r(58009);var n=r(21643),i=r(59462);let s=(0,n.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,...r}){return(0,a.jsx)("div",{className:(0,i.cn)(s({variant:t}),e),...r})}},90898:(e,t,r)=>{"use strict";r.d(t,{S:()=>o});var a=r(45512),n=r(58009),i=r(2112),s=r(24849),l=r(59462);let o=n.forwardRef(({className:e,...t},r)=>(0,a.jsx)(i.bL,{ref:r,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:(0,a.jsx)(i.C1,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(s.A,{className:"h-4 w-4"})})}));o.displayName=i.bL.displayName},25409:(e,t,r)=>{"use strict";r.d(t,{p:()=>s});var a=r(45512),n=r(58009),i=r(59462);let s=n.forwardRef(({className:e,type:t,...r},n)=>(0,a.jsx)("input",{type:t,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));s.displayName="Input"},47699:(e,t,r)=>{"use strict";r.d(t,{Label:()=>d});var a=r(45512),n=r(58009),i=r(92405),s=r(21643),l=r(59462);let o=(0,s.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=n.forwardRef(({className:e,...t},r)=>(0,a.jsx)(i.b,{ref:r,className:(0,l.cn)(o(),e),...t}));d.displayName=i.b.displayName},48859:(e,t,r)=>{"use strict";r.d(t,{T:()=>s});var a=r(45512),n=r(58009),i=r(59462);let s=n.forwardRef(({className:e,...t},r)=>(0,a.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));s.displayName="Textarea"},99905:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(73258).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},5821:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(73258).A)("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]])},44949:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(73258).A)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3736:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(73258).A)("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},18741:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(73258).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},33680:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(73258).A)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},86256:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let a=r(25488)._(r(40568));function n(e,t){var r;let n={};"function"==typeof e&&(n.loader=e);let i={...n,...t};return(0,a.default)({...i,modules:null==(r=i.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3400:(e,t)=>{"use strict";function r(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"encodeURIPath",{enumerable:!0,get:function(){return r}})},65771:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return n}});let a=r(54639);function n(e){let{reason:t,children:r}=e;throw new a.BailoutToCSRError(t)}},40568:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let a=r(45512),n=r(58009),i=r(65771),s=r(86054);function l(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},d=function(e){let t={...o,...e},r=(0,n.lazy)(()=>t.loader().then(l)),d=t.loading;function c(e){let l=d?(0,a.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,o=!t.ssr||!!t.loading,c=o?n.Suspense:n.Fragment,u=t.ssr?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.PreloadChunks,{moduleIds:t.modules}),(0,a.jsx)(r,{...e})]}):(0,a.jsx)(i.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(r,{...e})});return(0,a.jsx)(c,{...o?{fallback:l}:{},children:u})}return c.displayName="LoadableComponent",c}},86054:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return l}});let a=r(45512),n=r(55740),i=r(29294),s=r(3400);function l(e){let{moduleIds:t}=e,r=i.workAsyncStorage.getStore();if(void 0===r)return null;let l=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files;l.push(...t)}}return 0===l.length?null:(0,a.jsx)(a.Fragment,{children:l.map(e=>{let t=r.assetPrefix+"/_next/"+(0,s.encodeURIPath)(e);return e.endsWith(".css")?(0,a.jsx)("link",{precedence:"dynamic",href:t,rel:"stylesheet",as:"style"},e):((0,n.preload)(t,{as:"script",fetchPriority:"low"}),null)})})}},94825:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var a=r(62740);function n({children:e}){return(0,a.jsx)("div",{className:"min-h-screen bg-background",children:(0,a.jsx)("div",{className:"container mx-auto py-6",children:e})})}},60766:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/olatunde/Github/VisualMenu/app/admin/menu-management/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/olatunde/Github/VisualMenu/app/admin/menu-management/page.tsx","default")},92405:(e,t,r)=>{"use strict";r.d(t,{b:()=>l});var a=r(58009),n=r(30830),i=r(45512),s=a.forwardRef((e,t)=>(0,i.jsx)(n.sG.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));s.displayName="Label";var l=s}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,179,531,234,561,90,438,231,549],()=>r(87210));module.exports=a})();