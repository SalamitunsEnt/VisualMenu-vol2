(()=>{var e={};e.id=105,e.ids=[105],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},91645:e=>{"use strict";e.exports=require("net")},33873:e=>{"use strict";e.exports=require("path")},11997:e=>{"use strict";e.exports=require("punycode")},27910:e=>{"use strict";e.exports=require("stream")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},74075:e=>{"use strict";e.exports=require("zlib")},59102:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=s(70260),a=s(28203),i=s(25155),n=s.n(i),l=s(67292),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2155)),"/Users/olatunde/Github/VisualMenu/app/dashboard/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,83748)),"/Users/olatunde/Github/VisualMenu/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,19611)),"/Users/olatunde/Github/VisualMenu/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"]}],c=["/Users/olatunde/Github/VisualMenu/app/dashboard/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},73211:(e,t,s)=>{Promise.resolve().then(s.bind(s,83748))},26355:(e,t,s)=>{Promise.resolve().then(s.bind(s,49928))},46664:(e,t,s)=>{Promise.resolve().then(s.bind(s,2155))},10216:(e,t,s)=>{Promise.resolve().then(s.bind(s,43650))},49928:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(45512),a=s(58009),i=s(28531),n=s.n(i),l=s(79334),o=s(59462),d=s(87021),c=s(4087),u=s(30829);let m=[{title:"Dashboard",href:"/dashboard",icon:"menu"},{title:"Menu Management",href:"/dashboard/menu",icon:"menu"},{title:"Analytics",href:"/dashboard/analytics",icon:"chart"},{title:"Settings",href:"/dashboard/settings",icon:"settings"}];function x({children:e}){let[t,s]=(0,a.useState)(!0),i=(0,l.usePathname)(),{signOut:x}=(0,u.A)();return(0,r.jsxs)("div",{className:"flex min-h-screen",children:[(0,r.jsxs)("aside",{className:(0,o.cn)("fixed left-0 top-0 z-40 h-screen w-64 -translate-x-full border-r bg-background transition-transform lg:translate-x-0",t&&"translate-x-0"),children:[(0,r.jsxs)("div",{className:"flex h-16 items-center justify-between border-b px-4",children:[(0,r.jsxs)(n(),{href:"/dashboard",className:"flex items-center gap-2",children:[(0,r.jsx)(c.F.logo,{className:"h-6 w-6"}),(0,r.jsx)("span",{className:"font-bold",children:"Visual Menu"})]}),(0,r.jsx)(d.$,{variant:"ghost",size:"icon",onClick:()=>s(!1),className:"lg:hidden",children:(0,r.jsx)(c.F.close,{className:"h-4 w-4"})})]}),(0,r.jsx)("nav",{className:"space-y-1 p-4",children:m.map(e=>{let t=c.F[e.icon];return(0,r.jsxs)(n(),{href:e.href,className:(0,o.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground",i===e.href?"bg-accent text-accent-foreground":"text-muted-foreground"),children:[(0,r.jsx)(t,{className:"h-4 w-4"}),e.title]},e.href)})}),(0,r.jsx)("div",{className:"absolute bottom-4 left-4 right-4",children:(0,r.jsx)(d.$,{variant:"outline",className:"w-full",onClick:()=>x(),children:"Sign Out"})})]}),(0,r.jsxs)("div",{className:(0,o.cn)("flex-1 transition-margin lg:ml-64",!t&&"ml-0"),children:[(0,r.jsx)("header",{className:"sticky top-0 z-30 border-b bg-background",children:(0,r.jsx)("div",{className:"flex h-16 items-center gap-4 px-4",children:(0,r.jsx)(d.$,{variant:"ghost",size:"icon",onClick:()=>s(!0),className:"lg:hidden",children:(0,r.jsx)(c.F.menu,{className:"h-4 w-4"})})})}),(0,r.jsx)("main",{className:"container mx-auto p-4 lg:p-8",children:e})]})]})}},43650:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s(45512),a=s(89633),i=s(24559),n=s(97643),l=s(4087),o=s(23081),d=s(97981),c=s(26507),u=s(11452),m=s(1263),x=s(707),h=s(46879),p=s(53612),f=s(93422),g=s(51103);function j(){let e=(0,i.U)(),{data:t,isLoading:s}=(0,a.I)({queryKey:["dashboard"],queryFn:async()=>{let t=new Date,s=(0,p.e)(t,30),r=function(e,t){let s=(0,f.a)(e,void 0);return s.setDate(1),s.setHours(0,0,0,0),s}(t),[{data:a},{data:i},{data:n},{data:l}]=await Promise.all([e.from("menu_items").select("id, name, is_available"),e.from("categories").select("id, name"),e.from("menu_item_views").select("menu_item_id, viewed_at").gte("viewed_at",s.toISOString()),e.from("menu_item_views").select("id").gte("viewed_at",r.toISOString())]);if(!a||!i||!n||!l)throw Error("Failed to fetch data");let o=Array.from({length:30},(e,s)=>{let r=(0,p.e)(t,29-s),a=n.filter(e=>new Date(e.viewed_at).toDateString()===r.toDateString());return{date:(0,g.GP)(r,"MMM d"),views:a.length}}),d=a.map(e=>({name:e.name,views:n.filter(t=>t.menu_item_id===e.id).length})).sort((e,t)=>t.views-e.views);return{totalViews:l.length,totalItems:a.length,activeItems:a.filter(e=>e.is_available).length,totalCategories:i.length,dailyViews:o,popularItems:d.slice(0,5)}}});return(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Welcome back"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Here's an overview of your restaurant's performance"})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(n.ZB,{className:"text-sm font-medium",children:"Total Views"}),(0,r.jsx)(l.F.chart,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(n.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:s?"...":t?.totalViews.toLocaleString()}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Menu views this month"})]})]}),(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(n.ZB,{className:"text-sm font-medium",children:"Menu Items"}),(0,r.jsx)(l.F.list,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(n.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:s?"...":t?.activeItems.toLocaleString()}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Active menu items"})]})]}),(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(n.ZB,{className:"text-sm font-medium",children:"Categories"}),(0,r.jsx)(l.F.list,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(n.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:s?"...":t?.totalCategories.toLocaleString()}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Menu categories"})]})]}),(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(n.ZB,{className:"text-sm font-medium",children:"QR Codes"}),(0,r.jsx)(l.F.qr,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(n.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:"1"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Active QR codes"})]})]})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-7",children:[(0,r.jsxs)(n.Zp,{className:"col-span-4",children:[(0,r.jsx)(n.aR,{children:(0,r.jsx)(n.ZB,{children:"Overview"})}),(0,r.jsx)(n.Wu,{children:s?(0,r.jsx)("div",{className:"h-[350px] flex items-center justify-center",children:"Loading..."}):t?.dailyViews.length===0?(0,r.jsx)("div",{className:"h-[350px] flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-lg font-medium",children:"No data yet"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Views will appear here once customers start using your menu"})]})}):(0,r.jsx)("div",{className:"h-[350px]",children:(0,r.jsx)(o.u,{width:"100%",height:"100%",children:(0,r.jsxs)(d.b,{data:t?.dailyViews,children:[(0,r.jsx)(c.d,{strokeDasharray:"3 3"}),(0,r.jsx)(u.W,{dataKey:"date",tick:{fontSize:12},interval:"preserveStartEnd"}),(0,r.jsx)(m.h,{tick:{fontSize:12}}),(0,r.jsx)(x.m,{}),(0,r.jsx)(h.N,{type:"monotone",dataKey:"views",stroke:"#3b82f6",strokeWidth:2,dot:!1})]})})})})]}),(0,r.jsxs)(n.Zp,{className:"col-span-3",children:[(0,r.jsx)(n.aR,{children:(0,r.jsx)(n.ZB,{children:"Popular Items"})}),(0,r.jsx)(n.Wu,{children:s?(0,r.jsx)("div",{children:"Loading..."}):t?.popularItems.length===0?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("p",{className:"text-lg font-medium",children:"No data yet"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Add menu items to see analytics"})]}):(0,r.jsx)("div",{className:"space-y-4",children:t?.popularItems.map((e,t)=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm truncate flex-1",children:e.name}),r.jsxs("span",{className:"text-sm font-medium",children:[e.views.toLocaleString()," views"]})]},t))})})]})]})]})}},97643:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>l,wL:()=>u});var r=s(45512),a=s(58009),i=s(59462);let n=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...t}));n.displayName="Card";let l=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let o=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("h3",{ref:s,className:(0,i.cn)("font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let d=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let u=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t}));u.displayName="CardFooter"},4087:(e,t,s)=>{"use strict";s.d(t,{F:()=>w});var r=s(74164),a=s(44269),i=s(44949),n=s(52706),l=s(99905),o=s(76438),d=s(32848),c=s(92411),u=s(24849),m=s(76820),x=s(18741),h=s(12461),p=s(94520),f=s(63170),g=s(3736),j=s(31904),v=s(5821),b=s(81551),N=s(12592);let w={logo:r.A,close:a.A,spinner:i.A,chevronLeft:n.A,chevronRight:l.A,menu:o.A,moon:d.A,sun:c.A,check:u.A,chevronsUpDown:m.A,add:x.A,chart:h.A,settings:p.A,qr:f.A,edit:g.A,grip:j.A,list:v.A,trash:b.A,copy:N.A}},24849:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(73258).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},94520:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(73258).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},83748:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/olatunde/Github/VisualMenu/app/dashboard/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/olatunde/Github/VisualMenu/app/dashboard/layout.tsx","default")},2155:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/olatunde/Github/VisualMenu/app/dashboard/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/olatunde/Github/VisualMenu/app/dashboard/page.tsx","default")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,179,531,633,223,602,231],()=>s(59102));module.exports=r})();