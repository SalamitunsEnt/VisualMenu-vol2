(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3698],{37597:(e,s,t)=>{Promise.resolve().then(t.bind(t,38476))},38476:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f});var r=t(95155),a=t(12115),n=t(63259),i=t(14085),l=t(35007),d=t(31641),o=t(14807),c=t(92626),u=t(70147),m=t(92823),h=t(18617),x=t(76046);function f(){let{user:e}=(0,h.A)(),s=(0,x.useRouter)(),[t,f]=(0,a.useState)({totalRevenue:0,activeMenus:0,totalOrders:0,activeCustomers:0}),[v,g]=(0,a.useState)(!0),[y,b]=(0,a.useState)("");async function p(){try{let e=(0,n.U)();console.log("Fetching dashboard statistics...");let{count:s,error:t}=await e.from("menu_items").select("*",{count:"exact",head:!0});if(t)throw t;let{data:r,error:a}=await e.from("orders").select("total_amount");if(a)throw a;let i=(null==r?void 0:r.reduce((e,s)=>e+(Number(s.total_amount)||0),0))||0,{count:l,error:d}=await e.from("users").select("*",{count:"exact",head:!0});if(d)throw d;f({totalRevenue:i,activeMenus:s||0,totalOrders:(null==r?void 0:r.length)||0,activeCustomers:l||0})}catch(e){console.error("Error fetching dashboard stats:",e),b(e.message||"Failed to load dashboard statistics")}finally{g(!1)}}return((0,a.useEffect)(()=>{if(!e){s.push("/login");return}p()},[e,s]),e)?v?(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"}),(0,r.jsx)("p",{className:"mt-4",children:"Loading dashboard data..."})]})}):y?(0,r.jsx)("div",{className:"p-8",children:(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,r.jsx)("strong",{className:"font-bold",children:"Error loading dashboard"}),(0,r.jsxs)("p",{className:"block sm:inline",children:[" ",y]}),(0,r.jsx)(i.$,{onClick:()=>p(),variant:"outline",className:"mt-2",children:"Retry"})]})}):(0,r.jsxs)("div",{className:"p-8",children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-8",children:(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Dashboard"})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(l.ZB,{className:"text-sm font-medium",children:"Total Revenue"}),(0,r.jsx)(o.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(l.Wu,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:["$",t.totalRevenue.toFixed(2)]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Real-time revenue data"})]})]}),(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(l.ZB,{className:"text-sm font-medium",children:"Active Menu Items"}),(0,r.jsx)(c.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(l.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:t.activeMenus}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total active menu items"})]})]}),(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(l.ZB,{className:"text-sm font-medium",children:"Total Orders"}),(0,r.jsx)(u.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(l.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:t.totalOrders}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Orders processed"})]})]}),(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(l.ZB,{className:"text-sm font-medium",children:"Active Users"}),(0,r.jsx)(m.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(l.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:t.activeCustomers}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Registered users"})]})]})]}),(0,r.jsxs)(d.Tabs,{defaultValue:"overview",className:"space-y-4",children:[(0,r.jsxs)(d.TabsList,{children:[(0,r.jsx)(d.TabsTrigger,{value:"overview",children:"Overview"}),(0,r.jsx)(d.TabsTrigger,{value:"analytics",children:"Analytics"}),(0,r.jsx)(d.TabsTrigger,{value:"menus",children:"Menus"})]}),(0,r.jsxs)(d.TabsContent,{value:"overview",className:"space-y-4",children:[(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsx)(l.ZB,{children:"Revenue Overview"}),(0,r.jsx)(l.BT,{children:"Real-time revenue data and trends"})]}),(0,r.jsx)(l.Wu,{children:(0,r.jsx)("div",{className:"h-[200px] flex items-center justify-center bg-gray-100 rounded-md",children:"Revenue Chart Placeholder"})})]}),(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsx)(l.ZB,{children:"Recent Orders"}),(0,r.jsx)(l.BT,{children:"Latest order activity"})]}),(0,r.jsx)(l.Wu,{children:(0,r.jsx)("div",{className:"space-y-8",children:[1,2,3].map(e=>(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("p",{className:"text-sm font-medium leading-none",children:["Order #",1e3+e]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"2 items - $24.00"})]}),(0,r.jsx)("div",{className:"ml-auto font-medium",children:"Processing"})]},e))})})]})]}),(0,r.jsx)(d.TabsContent,{value:"analytics",className:"space-y-4",children:(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsx)(l.ZB,{children:"Sales Trend"}),(0,r.jsx)(l.BT,{children:"Monthly sales performance"})]}),(0,r.jsx)(l.Wu,{children:(0,r.jsx)("div",{className:"h-[200px] flex items-center justify-center bg-gray-100 rounded-md",children:"Sales Trend Chart Placeholder"})})]})}),(0,r.jsx)(d.TabsContent,{value:"menus",className:"space-y-4",children:(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsx)(l.ZB,{children:"Menu Management"}),(0,r.jsx)(l.BT,{children:"Create and manage your restaurant menus"})]}),(0,r.jsx)(l.Wu,{children:(0,r.jsx)("div",{className:"h-[200px] flex items-center justify-center bg-gray-100 rounded-md",children:"Menu Management Content Placeholder"})})]})})]})]}):null}},14085:(e,s,t)=>{"use strict";t.d(s,{$:()=>o,r:()=>d});var r=t(95155),a=t(12115),n=t(12317),i=t(31027),l=t(29602);let d=(0,i.F)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,s)=>{let{className:t,variant:a,size:i,asChild:o=!1,...c}=e,u=o?n.DX:"button";return(0,r.jsx)(u,{className:(0,l.cn)(d({variant:a,size:i,className:t})),ref:s,...c})});o.displayName="Button"},35007:(e,s,t)=>{"use strict";t.d(s,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>i,aR:()=>l,wL:()=>u});var r=t(95155),a=t(12115),n=t(29602);let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...a})});i.displayName="Card";let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...a})});l.displayName="CardHeader";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("h3",{ref:s,className:(0,n.cn)("font-semibold leading-none tracking-tight",t),...a})});d.displayName="CardTitle";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...a})});o.displayName="CardDescription";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...a})});c.displayName="CardContent";let u=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...a})});u.displayName="CardFooter"},31641:(e,s,t)=>{"use strict";t.d(s,{Tabs:()=>l,TabsContent:()=>c,TabsList:()=>d,TabsTrigger:()=>o});var r=t(95155),a=t(12115),n=t(58629),i=t(29602);let l=n.bL,d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.B8,{ref:s,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...a})});d.displayName=n.B8.displayName;let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.l9,{ref:s,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...a})});o.displayName=n.l9.displayName;let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.UC,{ref:s,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...a})});c.displayName=n.UC.displayName},18617:(e,s,t)=>{"use strict";t.d(s,{A:()=>c,O:()=>o});var r=t(95155),a=t(12115),n=t(63259),i=t(76046),l=t(30814);let d=(0,a.createContext)(void 0);function o(e){let{children:s}=e,[t,o]=(0,a.useState)(null),[c,u]=(0,a.useState)(!0),m=(0,i.useRouter)(),h=(0,n.U)();(0,a.useEffect)(()=>{let{data:{subscription:e}}=h.auth.onAuthStateChange((e,s)=>{var t;o(null!==(t=null==s?void 0:s.user)&&void 0!==t?t:null),u(!1),"SIGNED_IN"===e&&m.refresh(),"SIGNED_OUT"===e&&m.refresh()});return()=>{e.unsubscribe()}},[h,m]);let x=async(e,s)=>{try{let{error:t}=await h.auth.signInWithPassword({email:e,password:s});if(t)throw t;m.push("/dashboard"),l.oR.success("Welcome back!")}catch(e){l.oR.error(e.message)}},f=async(e,s)=>{try{let{error:t}=await h.auth.signUp({email:e,password:s});if(t)throw t;l.oR.success("Check your email to confirm your account")}catch(e){l.oR.error(e.message)}},v=async()=>{try{let{error:e}=await h.auth.signOut();if(e)throw e;m.push("/"),l.oR.success("Signed out successfully")}catch(e){l.oR.error(e.message)}},g=async e=>{try{let{error:s}=await h.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});if(s)throw s;l.oR.success("Check your email for the reset link")}catch(e){l.oR.error(e.message)}},y=async e=>{try{if(!t)throw Error("No user logged in");let{error:s}=await h.auth.updateUser({data:{dietary:e.dietary,favorites:e.favorites,dark_mode:e.dark_mode,language:e.language}});if(s)throw s;l.oR.success("Preferences updated successfully")}catch(e){l.oR.error(e.message)}};return(0,r.jsx)(d.Provider,{value:{user:t,loading:c,preferences:(null==t?void 0:t.user_metadata)||null,signIn:x,signUp:f,signOut:v,resetPassword:g,updatePreferences:y},children:s})}function c(){let e=(0,a.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},63259:(e,s,t)=>{"use strict";t.d(s,{U:()=>a});var r=t(9806);function a(){return(0,r.createClientComponentClient)()}},29602:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n});var r=t(43463),a=t(69795);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.QP)((0,r.$)(s))}},70147:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82800).A)("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]])},14807:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82800).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},92823:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82800).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},92626:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82800).A)("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]])},58629:(e,s,t)=>{"use strict";t.d(s,{B8:()=>B,UC:()=>Z,bL:()=>A,l9:()=>M});var r=t(12115),a=t(93610),n=t(18166),i=t(67357),l=t(17028),d=t(23360),o=t(4256),c=t(1488),u=t(67668),m=t(95155),h="Tabs",[x,f]=(0,n.A)(h,[i.RG]),v=(0,i.RG)(),[g,y]=x(h),b=r.forwardRef((e,s)=>{let{__scopeTabs:t,value:r,onValueChange:a,defaultValue:n,orientation:i="horizontal",dir:l,activationMode:h="automatic",...x}=e,f=(0,o.jH)(l),[v,y]=(0,c.i)({prop:r,onChange:a,defaultProp:n});return(0,m.jsx)(g,{scope:t,baseId:(0,u.B)(),value:v,onValueChange:y,orientation:i,dir:f,activationMode:h,children:(0,m.jsx)(d.sG.div,{dir:f,"data-orientation":i,...x,ref:s})})});b.displayName=h;var p="TabsList",j=r.forwardRef((e,s)=>{let{__scopeTabs:t,loop:r=!0,...a}=e,n=y(p,t),l=v(t);return(0,m.jsx)(i.bL,{asChild:!0,...l,orientation:n.orientation,dir:n.dir,loop:r,children:(0,m.jsx)(d.sG.div,{role:"tablist","aria-orientation":n.orientation,...a,ref:s})})});j.displayName=p;var N="TabsTrigger",w=r.forwardRef((e,s)=>{let{__scopeTabs:t,value:r,disabled:n=!1,...l}=e,o=y(N,t),c=v(t),u=T(o.baseId,r),h=k(o.baseId,r),x=r===o.value;return(0,m.jsx)(i.q7,{asChild:!0,...c,focusable:!n,active:x,children:(0,m.jsx)(d.sG.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":h,"data-state":x?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:u,...l,ref:s,onMouseDown:(0,a.m)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(r)}),onKeyDown:(0,a.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(r)}),onFocus:(0,a.m)(e.onFocus,()=>{let e="manual"!==o.activationMode;x||n||!e||o.onValueChange(r)})})})});w.displayName=N;var R="TabsContent",C=r.forwardRef((e,s)=>{let{__scopeTabs:t,value:a,forceMount:n,children:i,...o}=e,c=y(R,t),u=T(c.baseId,a),h=k(c.baseId,a),x=a===c.value,f=r.useRef(x);return r.useEffect(()=>{let e=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,m.jsx)(l.C,{present:n||x,children:t=>{let{present:r}=t;return(0,m.jsx)(d.sG.div,{"data-state":x?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!r,id:h,tabIndex:0,...o,ref:s,style:{...e.style,animationDuration:f.current?"0s":void 0},children:r&&i})}})});function T(e,s){return"".concat(e,"-trigger-").concat(s)}function k(e,s){return"".concat(e,"-content-").concat(s)}C.displayName=R;var A=b,B=j,M=w,Z=C}},e=>{var s=s=>e(e.s=s);e.O(0,[1181,5593,9806,9125,5934,8441,1517,7358],()=>s(37597)),_N_E=e.O()}]);