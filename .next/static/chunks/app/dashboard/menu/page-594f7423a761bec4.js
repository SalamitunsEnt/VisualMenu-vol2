(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1049],{16708:(e,s,t)=>{Promise.resolve().then(t.bind(t,56416))},56416:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>ep});var a=t(95155),r=t(12115),i=t(547),n=t(14085),l=t(285),o=t(63259),d=t(69606),c=t(85060),m=t(43415),u=t(66217),x=t(40767),p=t(29602);let h=u.bL;u.l9;let f=u.ZL;u.bm;let g=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(u.hJ,{ref:s,className:(0,p.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});g.displayName=u.hJ.displayName;let j=r.forwardRef((e,s)=>{let{className:t,children:r,...i}=e;return(0,a.jsxs)(f,{children:[(0,a.jsx)(g,{}),(0,a.jsxs)(u.UC,{ref:s,className:(0,p.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...i,children:[r,(0,a.jsxs)(u.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});j.displayName=u.UC.displayName;let y=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,p.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};y.displayName="DialogHeader";let v=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,p.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};v.displayName="DialogFooter";let b=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(u.hE,{ref:s,className:(0,p.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});b.displayName=u.hE.displayName;let N=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(u.VY,{ref:s,className:(0,p.cn)("text-sm text-muted-foreground",t),...r})});N.displayName=u.VY.displayName;var w=t(34839),_=t(9955),C=t(10371),z=t(72581),R=t(35906),k=t(25848),A=t(30814),I=t(82176),q=t(50745),F=t(88280),T=t(27554),S=t(13697);let M="menu-images";async function D(e){let s=(0,o.U)();try{let t=e.name.split(".").pop(),a="".concat((0,S.A)(),".").concat(t),{error:r,data:i}=await s.storage.from(M).upload(a,e);if(r)throw r;let{data:{publicUrl:n}}=s.storage.from(M).getPublicUrl(a);return{path:a,url:n}}catch(e){throw console.error("Error uploading image:",e),e}}async function E(e){let s=(0,o.U)();try{let{error:t}=await s.storage.from(M).remove([e]);if(t)throw t}catch(e){throw console.error("Error deleting image:",e),e}}function V(e){let{value:s,onChange:t,onRemove:i,className:l,disabled:o}=e,[d,c]=r.useState(s||null),[m,u]=r.useState(!1),h=r.useCallback(async e=>{if(o)return;let s=e[0];if(!s||!s.type.startsWith("image/")){A.oR.error("Please upload an image file");return}u(!0);try{let e=await D(s);c(e.url),t&&t(e)}catch(e){A.oR.error("Error uploading image"),console.error(e)}finally{u(!1)}},[o,t]),{getRootProps:f,getInputProps:g,isDragActive:j}=(0,F.VB)({onDrop:h,accept:{"image/*":[".png",".jpg",".jpeg",".gif"]},maxFiles:1,disabled:o||m});return r.useEffect(()=>()=>{d&&d.startsWith("blob:")&&URL.revokeObjectURL(d)},[d]),(0,a.jsx)("div",{className:(0,p.cn)("space-y-4 w-full",l),children:(0,a.jsxs)("div",{...f(),className:(0,p.cn)("border-2 border-dashed rounded-lg p-4 hover:bg-accent/50 transition cursor-pointer",j&&"border-primary",(o||m)&&"opacity-50 cursor-default hover:bg-transparent"),children:[(0,a.jsx)("input",{...g()}),d?(0,a.jsxs)("div",{className:"relative aspect-square w-full overflow-hidden rounded-lg",children:[(0,a.jsx)("img",{src:d,alt:"Upload preview",className:"object-cover w-full h-full"}),!o&&i&&(0,a.jsx)(n.$,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2",onClick:e=>{e.stopPropagation(),c(null),i()},disabled:m,children:(0,a.jsx)(x.A,{className:"h-4 w-4"})})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2 py-4",children:[(0,a.jsx)(T.A,{className:"h-8 w-8 text-muted-foreground"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground text-center",children:m?(0,a.jsx)("span",{children:"Uploading..."}):j?(0,a.jsx)("span",{children:"Drop the image here"}):(0,a.jsx)("span",{children:"Drag and drop an image here, or click to select"})})]})]})})}var B=t(76046),U=t(35007),L=t(43670),O=t(33473),J=t(19993),P=t(31641);let Y=m.Ik({name:m.Yj().min(1,"Name is required"),description:m.Yj().optional(),price:m.au.number().min(0,"Price must be greater than or equal to 0"),category_id:m.Yj().optional(),image_url:m.Yj().nullable(),image_path:m.Yj().nullable(),is_available:m.zM().default(!0),dietary_info:m.YO(m.Yj()),portion_sizes:m.YO(m.Ik({name:m.Yj().min(1,"Name is required"),price:m.ai().min(0,"Price must be positive"),is_default:m.zM().default(!1)})),customization_options:m.YO(m.Ik({name:m.Yj().min(1,"Name is required"),price_adjustment:m.ai().default(0),max_selections:m.ai().min(1,"At least one selection required"),is_required:m.zM().default(!1),choices:m.YO(m.Ik({name:m.Yj().min(1,"Name is required"),price_adjustment:m.ai().default(0),is_default:m.zM().default(!1)}))}))});function $(e){let{open:s,onOpenChange:t,item:m,onSuccess:u}=e,[x,p]=(0,r.useState)(!1),f=(0,R.jE)(),g=(0,o.U)();(0,B.useRouter)();let v=(0,d.mN)({resolver:(0,c.u)(Y),defaultValues:{name:"",description:"",price:0,category_id:void 0,image_url:null,image_path:null,is_available:!0,dietary_info:[],portion_sizes:[],customization_options:[]}});(0,r.useEffect)(()=>{m?v.reset({name:m.name,description:m.description||"",price:m.price,category_id:m.category_id||void 0,image_url:m.image_url||null,image_path:m.image_path||null,is_available:m.is_available,dietary_info:m.dietary_info||[],portion_sizes:m.portion_sizes||[],customization_options:m.customization_options||[]}):v.reset({name:"",description:"",price:0,category_id:void 0,image_url:null,image_path:null,is_available:!0,dietary_info:[],portion_sizes:[],customization_options:[]})},[v,m]);let{data:F}=(0,i.I)({queryKey:["categories"],queryFn:async()=>{let{data:e,error:s}=await g.from("categories").select("*").order("order_index",{ascending:!0});if(s)throw s;return e}}),{mutate:T}=(0,k.n)({mutationFn:async e=>{try{if(m){let{error:s}=await g.from("menu_items").update({name:e.name,description:e.description||null,price:e.price,category_id:e.category_id||null,image_url:e.image_url||null,image_path:e.image_path||null,is_available:e.is_available,dietary_info:e.dietary_info,updated_at:new Date().toISOString()}).eq("id",m.id);if(s)throw s;if(e.portion_sizes.length>0){await g.from("portion_sizes").delete().eq("menu_item_id",m.id);let{error:s}=await g.from("portion_sizes").insert(e.portion_sizes.map(e=>({...e,menu_item_id:m.id})));if(s)throw s}let{data:t}=await g.from("customization_options").select("id").eq("menu_item_id",m.id);if(t){for(let e of t)await g.from("customization_choices").delete().eq("option_id",e.id);await g.from("customization_options").delete().eq("menu_item_id",m.id)}for(let s of e.customization_options){let{data:e,error:t}=await g.from("customization_options").insert({menu_item_id:m.id,name:s.name,price_adjustment:s.price_adjustment,max_selections:s.max_selections,is_required:s.is_required}).select().single();if(t)throw t;if(s.choices&&s.choices.length>0){let{error:t}=await g.from("customization_choices").insert(s.choices.map(s=>({...s,option_id:e.id})));if(t)throw t}}}else{let{data:s,error:t}=await g.from("menu_items").insert({name:e.name,description:e.description,price:e.price,category_id:e.category_id,image_url:e.image_url,image_path:e.image_path,is_available:e.is_available,dietary_info:e.dietary_info}).select().single();if(t)throw t;if(e.portion_sizes.length>0){let{error:t}=await g.from("portion_sizes").insert(e.portion_sizes.map(e=>({...e,menu_item_id:s.id})));if(t)throw t}for(let t of e.customization_options){let{data:e,error:a}=await g.from("customization_options").insert({menu_item_id:s.id,name:t.name,price_adjustment:t.price_adjustment,max_selections:t.max_selections,is_required:t.is_required}).select().single();if(a)throw a;if(t.choices.length>0){let{error:s}=await g.from("customization_choices").insert(t.choices.map(s=>({...s,option_id:e.id})));if(s)throw s}}}}catch(e){throw console.error("Error saving menu item:",e),e}},onSuccess:()=>{f.invalidateQueries({queryKey:["menu-items"]}),A.oR.success(m?"Menu item updated successfully":"Menu item created successfully"),t(!1),m||v.reset(),null==u||u()},onError:e=>{console.error("Mutation error:",e),A.oR.error(e.message||"Failed to save menu item")}}),S=async e=>{try{p(!0),await T(e)}catch(e){console.error("Submit error:",e)}finally{p(!1)}},M=async e=>{e&&(v.setValue("image_url",e.url),v.setValue("image_path",e.path))},D=async()=>{if(null==m?void 0:m.image_path)try{await E(m.image_path)}catch(e){console.error("Error deleting image:",e)}v.setValue("image_url",null),v.setValue("image_path",null)};return(0,a.jsx)(h,{open:s,onOpenChange:t,children:(0,a.jsxs)(j,{className:"max-h-[90vh] overflow-y-auto max-w-3xl",children:[(0,a.jsxs)(y,{children:[(0,a.jsx)(b,{children:m?"Edit Menu Item":"Add Menu Item"}),(0,a.jsx)(N,{children:m?"Update the menu item details below.":"Add a new item to your menu."})]}),(0,a.jsx)(w.lV,{...v,children:(0,a.jsxs)("form",{onSubmit:v.handleSubmit(S),className:"space-y-6",children:[(0,a.jsxs)(P.Tabs,{defaultValue:"basic",className:"w-full",children:[(0,a.jsxs)(P.TabsList,{className:"grid w-full grid-cols-4",children:[(0,a.jsx)(P.TabsTrigger,{value:"basic",children:"Basic Info"}),(0,a.jsx)(P.TabsTrigger,{value:"dietary",children:"Dietary"}),(0,a.jsx)(P.TabsTrigger,{value:"portions",children:"Portions"}),(0,a.jsx)(P.TabsTrigger,{value:"customization",children:"Customization"})]}),(0,a.jsxs)(P.TabsContent,{value:"basic",className:"space-y-4 mt-4",children:[(0,a.jsx)(w.zB,{control:v.control,name:"name",render:e=>{let{field:s}=e;return(0,a.jsxs)(w.eI,{children:[(0,a.jsx)(w.lR,{children:"Name"}),(0,a.jsx)(w.MJ,{children:(0,a.jsx)(_.p,{...s,disabled:x})}),(0,a.jsx)(w.C5,{})]})}}),(0,a.jsx)(w.zB,{control:v.control,name:"description",render:e=>{let{field:s}=e;return(0,a.jsxs)(w.eI,{children:[(0,a.jsx)(w.lR,{children:"Description"}),(0,a.jsx)(w.MJ,{children:(0,a.jsx)(C.T,{...s,disabled:x})}),(0,a.jsx)(w.C5,{})]})}}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(w.zB,{control:v.control,name:"price",render:e=>{let{field:s}=e;return(0,a.jsxs)(w.eI,{children:[(0,a.jsx)(w.lR,{children:"Base Price"}),(0,a.jsx)(w.MJ,{children:(0,a.jsx)(_.p,{type:"number",step:"0.01",...s,onChange:e=>s.onChange(parseFloat(e.target.value)),disabled:x})}),(0,a.jsx)(w.C5,{})]})}}),(0,a.jsx)(w.zB,{control:v.control,name:"category_id",render:e=>{let{field:s}=e;return(0,a.jsxs)(w.eI,{children:[(0,a.jsx)(w.lR,{children:"Category"}),(0,a.jsxs)(q.l6,{disabled:x,onValueChange:s.onChange,value:s.value,children:[(0,a.jsx)(w.MJ,{children:(0,a.jsx)(q.bq,{children:(0,a.jsx)(q.yv,{placeholder:"Select a category"})})}),(0,a.jsx)(q.gC,{children:null==F?void 0:F.map(e=>(0,a.jsx)(q.eb,{value:e.id,children:e.name},e.id))})]}),(0,a.jsx)(w.C5,{})]})}})]}),(0,a.jsx)(w.zB,{control:v.control,name:"image_url",render:e=>{let{field:s}=e;return(0,a.jsxs)(w.eI,{children:[(0,a.jsx)(w.lR,{children:"Image"}),(0,a.jsx)(w.MJ,{children:(0,a.jsx)(V,{value:null===s.value?void 0:s.value,onChange:M,onRemove:D,disabled:x})}),(0,a.jsx)(w.C5,{})]})}}),(0,a.jsx)(w.zB,{control:v.control,name:"is_available",render:e=>{let{field:s}=e;return(0,a.jsxs)(w.eI,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(w.lR,{className:"text-base",children:"Available"}),(0,a.jsx)(w.Rr,{children:"This item will be shown on the menu"})]}),(0,a.jsx)(w.MJ,{children:(0,a.jsx)(z.d,{checked:s.value,onCheckedChange:s.onChange,disabled:x})})]})}})]}),(0,a.jsx)(P.TabsContent,{value:"dietary",className:"mt-4",children:(0,a.jsx)(w.zB,{control:v.control,name:"dietary_info",render:()=>(0,a.jsxs)(w.eI,{children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)(w.lR,{className:"text-base",children:"Dietary Information"}),(0,a.jsx)(w.Rr,{children:"Select all dietary options that apply to this item"})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:Object.keys(I.v).map(e=>(0,a.jsx)(w.zB,{control:v.control,name:"dietary_info",render:s=>{var t;let{field:r}=s;return(0,a.jsxs)(w.eI,{className:"flex flex-row items-start space-x-3 space-y-0",children:[(0,a.jsx)(w.MJ,{children:(0,a.jsx)(L.S,{checked:null===(t=r.value)||void 0===t?void 0:t.includes(e),onCheckedChange:s=>{let t=r.value||[];return s?r.onChange([...t,e]):r.onChange(t.filter(s=>s!==e))}})}),(0,a.jsx)(w.lR,{className:"font-normal",children:I.v[e]})]},e)}},e))})]})})}),(0,a.jsxs)(P.TabsContent,{value:"portions",className:"space-y-4 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"Portion Sizes"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Add different sizes with their prices"})]}),(0,a.jsxs)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e=v.getValues("portion_sizes");v.setValue("portion_sizes",[...e,{name:"",price:0,is_default:!1}])},children:[(0,a.jsx)(O.A,{className:"h-4 w-4 mr-2"}),"Add Size"]})]}),v.watch("portion_sizes").map((e,s)=>(0,a.jsx)(U.Zp,{children:(0,a.jsxs)(U.Wu,{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h4",{className:"font-medium",children:["Size ",s+1]}),(0,a.jsx)(n.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>{let e=v.getValues("portion_sizes");v.setValue("portion_sizes",e.filter((e,t)=>t!==s))},children:(0,a.jsx)(J.A,{className:"h-4 w-4"})})]}),(0,a.jsx)(w.zB,{control:v.control,name:"portion_sizes.".concat(s,".name"),render:e=>{let{field:s}=e;return(0,a.jsxs)(w.eI,{children:[(0,a.jsx)(w.lR,{children:"Name"}),(0,a.jsx)(w.MJ,{children:(0,a.jsx)(_.p,{...s,placeholder:"e.g., Small, Medium, Large"})}),(0,a.jsx)(w.C5,{})]})}}),(0,a.jsx)(w.zB,{control:v.control,name:"portion_sizes.".concat(s,".price"),render:e=>{let{field:s}=e;return(0,a.jsxs)(w.eI,{children:[(0,a.jsx)(w.lR,{children:"Price"}),(0,a.jsx)(w.MJ,{children:(0,a.jsx)(_.p,{type:"number",step:"0.01",...s,onChange:e=>s.onChange(parseFloat(e.target.value))})}),(0,a.jsx)(w.C5,{})]})}}),(0,a.jsx)(w.zB,{control:v.control,name:"portion_sizes.".concat(s,".is_default"),render:e=>{let{field:s}=e;return(0,a.jsxs)(w.eI,{className:"flex flex-row items-start space-x-3 space-y-0",children:[(0,a.jsx)(w.MJ,{children:(0,a.jsx)(L.S,{checked:s.value,onCheckedChange:s.onChange})}),(0,a.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,a.jsx)(w.lR,{children:"Default Size"}),(0,a.jsx)(w.Rr,{children:"This will be the default size option"})]})]})}})]})},s))]}),(0,a.jsxs)(P.TabsContent,{value:"customization",className:"space-y-4 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"Customization Options"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Add customization options with choices"})]}),(0,a.jsxs)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e=v.getValues("customization_options");v.setValue("customization_options",[...e,{name:"",price_adjustment:0,max_selections:1,is_required:!1,choices:[]}])},children:[(0,a.jsx)(O.A,{className:"h-4 w-4 mr-2"}),"Add Option"]})]}),v.watch("customization_options").map((e,s)=>(0,a.jsx)(U.Zp,{children:(0,a.jsxs)(U.Wu,{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h4",{className:"font-medium",children:["Option ",s+1]}),(0,a.jsx)(n.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>{let e=v.getValues("customization_options");v.setValue("customization_options",e.filter((e,t)=>t!==s))},children:(0,a.jsx)(J.A,{className:"h-4 w-4"})})]}),(0,a.jsx)(w.zB,{control:v.control,name:"customization_options.".concat(s,".name"),render:e=>{let{field:s}=e;return(0,a.jsxs)(w.eI,{children:[(0,a.jsx)(w.lR,{children:"Name"}),(0,a.jsx)(w.MJ,{children:(0,a.jsx)(_.p,{...s,placeholder:"e.g., Toppings, Cooking Preference"})}),(0,a.jsx)(w.C5,{})]})}}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(w.zB,{control:v.control,name:"customization_options.".concat(s,".max_selections"),render:e=>{let{field:s}=e;return(0,a.jsxs)(w.eI,{children:[(0,a.jsx)(w.lR,{children:"Max Selections"}),(0,a.jsx)(w.MJ,{children:(0,a.jsx)(_.p,{type:"number",min:"1",...s,onChange:e=>s.onChange(parseInt(e.target.value))})}),(0,a.jsx)(w.C5,{})]})}}),(0,a.jsx)(w.zB,{control:v.control,name:"customization_options.".concat(s,".is_required"),render:e=>{let{field:s}=e;return(0,a.jsxs)(w.eI,{className:"flex flex-row items-start space-x-3 space-y-0 pt-6",children:[(0,a.jsx)(w.MJ,{children:(0,a.jsx)(L.S,{checked:s.value,onCheckedChange:s.onChange})}),(0,a.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,a.jsx)(w.lR,{children:"Required"}),(0,a.jsx)(w.Rr,{children:"Customer must select an option"})]})]})}})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h5",{className:"text-sm font-medium",children:"Choices"}),(0,a.jsxs)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e=v.getValues("customization_options")[s].choices;v.setValue("customization_options.".concat(s,".choices"),[...e,{name:"",price_adjustment:0,is_default:!1}])},children:[(0,a.jsx)(O.A,{className:"h-4 w-4 mr-2"}),"Add Choice"]})]}),v.watch("customization_options.".concat(s,".choices")).map((e,t)=>(0,a.jsx)(U.Zp,{children:(0,a.jsxs)(U.Wu,{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h6",{className:"text-sm font-medium",children:["Choice ",t+1]}),(0,a.jsx)(n.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>{let e=v.getValues("customization_options")[s].choices;v.setValue("customization_options.".concat(s,".choices"),e.filter((e,s)=>s!==t))},children:(0,a.jsx)(J.A,{className:"h-4 w-4"})})]}),(0,a.jsx)(w.zB,{control:v.control,name:"customization_options.".concat(s,".choices.").concat(t,".name"),render:e=>{let{field:s}=e;return(0,a.jsxs)(w.eI,{children:[(0,a.jsx)(w.lR,{children:"Name"}),(0,a.jsx)(w.MJ,{children:(0,a.jsx)(_.p,{...s})}),(0,a.jsx)(w.C5,{})]})}}),(0,a.jsx)(w.zB,{control:v.control,name:"customization_options.".concat(s,".choices.").concat(t,".price_adjustment"),render:e=>{let{field:s}=e;return(0,a.jsxs)(w.eI,{children:[(0,a.jsx)(w.lR,{children:"Price Adjustment"}),(0,a.jsx)(w.MJ,{children:(0,a.jsx)(_.p,{type:"number",step:"0.01",...s,onChange:e=>s.onChange(parseFloat(e.target.value))})}),(0,a.jsx)(w.C5,{})]})}}),(0,a.jsx)(w.zB,{control:v.control,name:"customization_options.".concat(s,".choices.").concat(t,".is_default"),render:e=>{let{field:s}=e;return(0,a.jsxs)(w.eI,{className:"flex flex-row items-start space-x-3 space-y-0",children:[(0,a.jsx)(w.MJ,{children:(0,a.jsx)(L.S,{checked:s.value,onCheckedChange:s.onChange})}),(0,a.jsx)("div",{className:"space-y-1 leading-none",children:(0,a.jsx)(w.lR,{children:"Default Choice"})})]})}})]})},t))]})]})},s))]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,a.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:x,children:"Cancel"}),(0,a.jsx)(n.$,{type:"submit",disabled:x,children:x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.F.spinner,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):m?"Update Item":"Create Item"})]})]})})]})})}var Z=t(83572);let W=Z.bL;Z.l9;let K=Z.ZL,Q=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(Z.hJ,{className:(0,p.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r,ref:s})});Q.displayName=Z.hJ.displayName;let H=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsxs)(K,{children:[(0,a.jsx)(Q,{}),(0,a.jsx)(Z.UC,{ref:s,className:(0,p.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r})]})});H.displayName=Z.UC.displayName;let G=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,p.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...t})};G.displayName="AlertDialogHeader";let X=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,p.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};X.displayName="AlertDialogFooter";let ee=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(Z.hE,{ref:s,className:(0,p.cn)("text-lg font-semibold",t),...r})});ee.displayName=Z.hE.displayName;let es=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(Z.VY,{ref:s,className:(0,p.cn)("text-sm text-muted-foreground",t),...r})});es.displayName=Z.VY.displayName;let et=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(Z.rc,{ref:s,className:(0,p.cn)((0,n.r)(),t),...r})});et.displayName=Z.rc.displayName;let ea=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(Z.ZD,{ref:s,className:(0,p.cn)((0,n.r)({variant:"outline"}),"mt-2 sm:mt-0",t),...r})});function er(e){let{items:s,isLoading:t,onItemUpdated:d}=e,[c,m]=(0,r.useState)(null),[u,x]=(0,r.useState)(null),p=(0,R.jE)(),h=(0,o.U)(),[f,g]=(0,r.useState)(null),{data:j}=(0,i.I)({queryKey:["categories"],queryFn:async()=>{let{data:e,error:s}=await h.from("categories").select("*").order("order_index",{ascending:!0});if(s)throw s;return e}}),y=u&&"all"!==u?s.filter(e=>e.category_id===u):s,{mutate:v}=(0,k.n)({mutationFn:async e=>{let{error:s}=await h.from("menu_items").update({is_available:!e.is_available,updated_at:new Date().toISOString()}).eq("id",e.id);if(s)throw s;return e},onMutate:async e=>{await p.cancelQueries({queryKey:["menu-items"]});let s=p.getQueryData(["menu-items"]);return s&&p.setQueryData(["menu-items"],s.map(s=>s.id===e.id?{...s,is_available:!s.is_available}:s)),{previousItems:s}},onError:(e,s,t)=>{(null==t?void 0:t.previousItems)&&p.setQueryData(["menu-items"],t.previousItems),A.oR.error("Failed to update item availability")},onSuccess:e=>{A.oR.success("".concat(e.name," ").concat(e.is_available?"disabled":"enabled")),null==d||d()},onSettled:()=>{p.invalidateQueries({queryKey:["menu-items"]})}}),{mutate:b}=(0,k.n)({mutationFn:async e=>{let{error:s}=await h.from("menu_items").delete().eq("id",e.id);if(s)throw s;return e},onSuccess:e=>{p.invalidateQueries({queryKey:["menu-items"]}),A.oR.success("".concat(e.name," deleted successfully")),g(null)},onError:e=>{console.error("Delete error:",e),A.oR.error("Failed to delete item")}});return t?(0,a.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,s)=>(0,a.jsxs)(U.Zp,{className:"animate-pulse",children:[(0,a.jsx)(U.aR,{children:(0,a.jsx)("div",{className:"h-6 w-1/3 bg-muted rounded"})}),(0,a.jsx)(U.Wu,{children:(0,a.jsx)("div",{className:"h-4 w-2/3 bg-muted rounded"})})]},s))}):0===s.length?(0,a.jsxs)(U.Zp,{children:[(0,a.jsx)(U.aR,{children:(0,a.jsx)(U.ZB,{children:"No menu items"})}),(0,a.jsx)(U.Wu,{children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"Add your first menu item to get started"})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)(q.l6,{value:null!=u?u:void 0,onValueChange:x,children:[(0,a.jsx)(q.bq,{className:"w-[200px]",children:(0,a.jsx)(q.yv,{placeholder:"Filter by category"})}),(0,a.jsxs)(q.gC,{children:[(0,a.jsx)(q.eb,{value:"all",children:"All categories"}),null==j?void 0:j.map(e=>(0,a.jsx)(q.eb,{value:e.id,children:e.name},e.id))]})]})}),(0,a.jsx)("div",{className:"space-y-4",children:y.map(e=>{var s;return(0,a.jsxs)(U.Zp,{children:[(0,a.jsxs)(U.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(U.ZB,{className:"text-xl",children:e.name}),e.description&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(z.d,{checked:e.is_available,onCheckedChange:()=>v(e)}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground ml-2",children:e.is_available?"Available":"Unavailable"})]})]}),(0,a.jsx)(U.Wu,{children:(0,a.jsx)("div",{className:"grid gap-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-6",children:[e.image_url&&(0,a.jsx)("div",{className:"relative aspect-square w-24 overflow-hidden rounded-lg",children:(0,a.jsx)("img",{src:e.image_url,alt:e.name,className:"object-cover w-full h-full"})}),(0,a.jsxs)("div",{className:"flex flex-1 items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Price"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["$",e.price.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Category"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:(null==j?void 0:null===(s=j.find(s=>s.id===e.category_id))||void 0===s?void 0:s.name)||"Uncategorized"})]}),e.dietary_info&&e.dietary_info.length>0&&(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Dietary Info"}),(0,a.jsx)("div",{className:"flex gap-1",children:e.dietary_info.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center rounded-full bg-muted px-2 py-1 text-xs",children:[I.g[e],I.v[e]]},e))})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(n.$,{variant:"ghost",size:"icon",onClick:()=>m(e),children:[(0,a.jsx)(l.F.edit,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Edit"})]}),(0,a.jsxs)(n.$,{variant:"ghost",size:"icon",onClick:()=>g(e),children:[(0,a.jsx)(l.F.trash,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Delete"})]})]})]})]})})})]},e.id)})}),(0,a.jsx)($,{open:!!c,onOpenChange:e=>!e&&m(null),item:c,onSuccess:()=>{m(null),null==d||d()}}),(0,a.jsx)(W,{open:!!f,onOpenChange:e=>!e&&g(null),children:(0,a.jsxs)(H,{children:[(0,a.jsxs)(G,{children:[(0,a.jsx)(ee,{children:"Are you sure?"}),(0,a.jsxs)(es,{children:["This will permanently delete ",null==f?void 0:f.name,". This action cannot be undone."]})]}),(0,a.jsxs)(X,{children:[(0,a.jsx)(ea,{children:"Cancel"}),(0,a.jsx)(et,{onClick:()=>f&&b(f),children:"Delete"})]})]})})]})}ea.displayName=Z.ZD.displayName;let ei=m.Ik({name:m.Yj().min(1,"Name is required"),description:m.Yj().optional()});function en(e){let{open:s,onOpenChange:t,category:i}=e,l=(0,B.useRouter)(),m=(0,o.U)(),u=(0,d.mN)({resolver:(0,c.u)(ei),defaultValues:{name:"",description:""}});(0,r.useEffect)(()=>{i&&u.reset({name:i.name,description:i.description||""})},[i,u]);let x=async e=>{try{if(i){let{error:s}=await m.from("categories").update({name:e.name,description:e.description,updated_at:new Date().toISOString()}).eq("id",i.id);if(s)throw s;A.oR.success("Category updated successfully")}else{let{error:s}=await m.from("categories").insert({name:e.name,description:e.description});if(s)throw s;A.oR.success("Category created successfully"),u.reset()}l.refresh(),t(!1)}catch(e){console.error("Error saving category:",e),A.oR.error("Failed to save category")}};return(0,a.jsx)(h,{open:s,onOpenChange:t,children:(0,a.jsxs)(j,{children:[(0,a.jsxs)(y,{children:[(0,a.jsx)(b,{children:i?"Edit Category":"Create Category"}),(0,a.jsx)(N,{children:i?"Update the category details below.":"Add a new category to organize your menu items."})]}),(0,a.jsx)(w.lV,{...u,children:(0,a.jsxs)("form",{onSubmit:u.handleSubmit(x),className:"space-y-4",children:[(0,a.jsx)(w.zB,{control:u.control,name:"name",render:e=>{let{field:s}=e;return(0,a.jsxs)(w.eI,{children:[(0,a.jsx)(w.lR,{children:"Name"}),(0,a.jsx)(w.MJ,{children:(0,a.jsx)(_.p,{placeholder:"Enter category name",...s})}),(0,a.jsx)(w.C5,{})]})}}),(0,a.jsx)(w.zB,{control:u.control,name:"description",render:e=>{let{field:s}=e;return(0,a.jsxs)(w.eI,{children:[(0,a.jsx)(w.lR,{children:"Description"}),(0,a.jsx)(w.MJ,{children:(0,a.jsx)(C.T,{placeholder:"Enter category description (optional)",...s})}),(0,a.jsx)(w.C5,{})]})}}),(0,a.jsxs)(v,{children:[(0,a.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),(0,a.jsx)(n.$,{type:"submit",children:i?"Update":"Create"})]})]})})]})})}var el=t(91812),eo=t(53561),ed=t(66329),ec=t(27530);function em(e){let{id:s,children:t}=e,{attributes:r,listeners:i,setNodeRef:n,transform:l,transition:o,isDragging:d}=(0,eo.gl)({id:s}),c={transform:ed.Ks.Transform.toString(l),transition:o,opacity:d?.5:1};return(0,a.jsxs)("div",{ref:n,style:c,className:"relative",children:[(0,a.jsx)("div",{...r,...i,className:"absolute left-2 top-1/2 -translate-y-1/2 cursor-grab active:cursor-grabbing",children:(0,a.jsx)(ec.A,{className:"h-4 w-4 text-muted-foreground"})}),(0,a.jsx)("div",{className:"pl-8",children:t})]})}function eu(e){let{categories:s,isLoading:t}=e,[i,l]=(0,r.useState)(null),d=(0,R.jE)(),c=(0,o.U)(),m=(0,B.useRouter)(),[u,x]=(0,r.useState)(null),p=(0,el.FR)((0,el.MS)(el.cA),(0,el.MS)(el.IG)),h=async e=>{try{let s=e.map((e,s)=>({id:e.id,order_index:s})),{error:t}=await c.from("categories").upsert(s);if(t)throw t;d.setQueryData(["categories"],e)}catch(e){console.error("Error updating category order:",e),A.oR.error("Failed to update category order")}},f=async()=>{if(u)try{let{error:e}=await c.from("categories").delete().eq("id",u.id);if(e)throw e;A.oR.success("Category deleted successfully"),m.refresh()}catch(e){console.error("Error deleting category:",e),A.oR.error("Failed to delete category")}finally{x(null)}};return t?(0,a.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,a.jsx)("div",{className:"h-24 rounded-lg border bg-muted/10 p-4 animate-pulse"},e))}):0===s.length?(0,a.jsxs)(U.Zp,{children:[(0,a.jsx)(U.aR,{children:(0,a.jsx)(U.ZB,{children:"No categories"})}),(0,a.jsx)(U.Wu,{children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"Add your first category to organize your menu"})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(el.Mp,{sensors:p,collisionDetection:el.fp,onDragEnd:e=>{let{active:t,over:a}=e;if(!a||t.id===a.id)return;let r=s.findIndex(e=>e.id===t.id),i=s.findIndex(e=>e.id===a.id);h((0,eo.be)(s,r,i))},children:(0,a.jsx)(eo.gB,{items:s,strategy:eo._G,children:(0,a.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,a.jsx)(em,{id:e.id,children:(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-lg border bg-card p-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>x(e),children:(0,a.jsx)(J.A,{className:"h-4 w-4"})}),(0,a.jsx)(n.$,{onClick:()=>l(e),children:"Edit"})]})]})},e.id))})})}),(0,a.jsx)(en,{open:!!i,onOpenChange:()=>l(null),category:i}),(0,a.jsx)(W,{open:!!u,onOpenChange:()=>x(null),children:(0,a.jsxs)(H,{children:[(0,a.jsxs)(G,{children:[(0,a.jsx)(ee,{children:"Are you sure?"}),(0,a.jsx)(es,{children:"This action cannot be undone. This will permanently delete the category and all menu items associated with it."})]}),(0,a.jsxs)(X,{children:[(0,a.jsx)(ea,{children:"Cancel"}),(0,a.jsx)(et,{onClick:f,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})}var ex=t(64725);function ep(){let[e,s]=(0,r.useState)(!1),[t,d]=(0,r.useState)(!1),c=(0,o.U)(),{data:m,isLoading:u}=(0,i.I)({queryKey:["menu-items"],queryFn:async()=>{try{let{data:e,error:s}=await c.from("menu_items").select("\n            id,\n            name,\n            description,\n            price,\n            category_id,\n            image_url,\n            image_path,\n            is_available,\n            dietary_info,\n            created_at,\n            updated_at\n          ").order("name",{ascending:!0});if(s)throw console.error("Menu items fetch error:",s),s;return await Promise.all((e||[]).map(async e=>{let{data:s}=await c.from("portion_sizes").select("*").eq("menu_item_id",e.id),{data:t}=await c.from("customization_options").select("\n                id, name, price_adjustment, max_selections, is_required, menu_item_id\n              ").eq("menu_item_id",e.id);if(t){let a=await Promise.all(t.map(async e=>{let{data:s}=await c.from("customization_choices").select("*").eq("option_id",e.id);return{...e,choices:s||[]}}));return{...e,dietary_info:e.dietary_info||[],portion_sizes:s||[],customization_options:a}}return{...e,dietary_info:e.dietary_info||[],portion_sizes:s||[],customization_options:[]}}))}catch(e){throw console.error("Error fetching menu items:",e),e}},staleTime:1e3,refetchOnWindowFocus:!0}),{data:x,isLoading:p}=(0,i.I)({queryKey:["categories"],queryFn:async()=>{let{data:e,error:s}=await c.from("categories").select("*").order("order_index",{ascending:!0});if(s)throw console.error("Error fetching categories:",s),s;return e||[]},staleTime:1e3,refetchOnWindowFocus:!0});return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Menu Management"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage your menu items and categories"})]})}),(0,a.jsxs)(P.Tabs,{defaultValue:"items",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(P.TabsList,{children:[(0,a.jsx)(P.TabsTrigger,{value:"items",children:"Menu Items"}),(0,a.jsx)(P.TabsTrigger,{value:"categories",children:"Categories"})]}),(0,a.jsx)(P.TabsContent,{value:"items",className:"mt-0",children:(0,a.jsxs)(n.$,{onClick:()=>s(!0),children:[(0,a.jsx)(l.F.add,{className:"mr-2 h-4 w-4"}),"Add Item"]})}),(0,a.jsx)(P.TabsContent,{value:"categories",className:"mt-0",children:(0,a.jsxs)(n.$,{onClick:()=>d(!0),children:[(0,a.jsx)(l.F.add,{className:"mr-2 h-4 w-4"}),"Add Category"]})})]}),(0,a.jsx)(P.TabsContent,{value:"items",className:"mt-0",children:(0,a.jsx)(er,{items:null!=m?m:[],isLoading:u,onItemUpdated:()=>{ex.q.invalidateQueries({queryKey:["menu-items"]})}})}),(0,a.jsx)(P.TabsContent,{value:"categories",className:"mt-0",children:(0,a.jsx)(eu,{categories:null!=x?x:[],isLoading:p})})]}),(0,a.jsx)($,{open:e,onOpenChange:s,onSuccess:()=>{ex.q.invalidateQueries({queryKey:["menu-items"]})}}),(0,a.jsx)(en,{open:t,onOpenChange:d})]})}},14085:(e,s,t)=>{"use strict";t.d(s,{$:()=>d,r:()=>o});var a=t(95155),r=t(12115),i=t(12317),n=t(31027),l=t(29602);let o=(0,n.F)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,s)=>{let{className:t,variant:r,size:n,asChild:d=!1,...c}=e,m=d?i.DX:"button";return(0,a.jsx)(m,{className:(0,l.cn)(o({variant:r,size:n,className:t})),ref:s,...c})});d.displayName="Button"},35007:(e,s,t)=>{"use strict";t.d(s,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>l,wL:()=>m});var a=t(95155),r=t(12115),i=t(29602);let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...r})});n.displayName="Card";let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...r})});l.displayName="CardHeader";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h3",{ref:s,className:(0,i.cn)("font-semibold leading-none tracking-tight",t),...r})});o.displayName="CardTitle";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",t),...r})});c.displayName="CardContent";let m=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",t),...r})});m.displayName="CardFooter"},43670:(e,s,t)=>{"use strict";t.d(s,{S:()=>o});var a=t(95155),r=t(12115),i=t(86352),n=t(98867),l=t(29602);let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.bL,{ref:s,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...r,children:(0,a.jsx)(i.C1,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})})});o.displayName=i.bL.displayName},34839:(e,s,t)=>{"use strict";t.d(s,{C5:()=>j,MJ:()=>f,Rr:()=>g,eI:()=>p,lR:()=>h,lV:()=>d,zB:()=>m});var a=t(95155),r=t(12115),i=t(12317),n=t(69606),l=t(29602),o=t(15785);let d=n.Op,c=r.createContext({}),m=e=>{let{...s}=e;return(0,a.jsx)(c.Provider,{value:{name:s.name},children:(0,a.jsx)(n.xI,{...s})})},u=()=>{let e=r.useContext(c),s=r.useContext(x),{getFieldState:t,formState:a}=(0,n.xW)(),i=t(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=s;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...i}},x=r.createContext({}),p=r.forwardRef((e,s)=>{let{className:t,...i}=e,n=r.useId();return(0,a.jsx)(x.Provider,{value:{id:n},children:(0,a.jsx)("div",{ref:s,className:(0,l.cn)("space-y-2",t),...i})})});p.displayName="FormItem";let h=r.forwardRef((e,s)=>{let{className:t,...r}=e,{error:i,formItemId:n}=u();return(0,a.jsx)(o.Label,{ref:s,className:(0,l.cn)(i&&"text-destructive",t),htmlFor:n,...r})});h.displayName="FormLabel";let f=r.forwardRef((e,s)=>{let{...t}=e,{error:r,formItemId:n,formDescriptionId:l,formMessageId:o}=u();return(0,a.jsx)(i.DX,{ref:s,id:n,"aria-describedby":r?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!r,...t})});f.displayName="FormControl";let g=r.forwardRef((e,s)=>{let{className:t,...r}=e,{formDescriptionId:i}=u();return(0,a.jsx)("p",{ref:s,id:i,className:(0,l.cn)("text-sm text-muted-foreground",t),...r})});g.displayName="FormDescription";let j=r.forwardRef((e,s)=>{let{className:t,children:r,...i}=e,{error:n,formMessageId:o}=u(),d=n?String(null==n?void 0:n.message):r;return d?(0,a.jsx)("p",{ref:s,id:o,className:(0,l.cn)("text-sm font-medium text-destructive",t),...i,children:d}):null});j.displayName="FormMessage"},285:(e,s,t)=>{"use strict";t.d(s,{F:()=>N});var a=t(88218),r=t(40767),i=t(70001),n=t(93518),l=t(46967),o=t(86710),d=t(22104),c=t(87725),m=t(98867),u=t(15800),x=t(33473),p=t(28527),h=t(68236),f=t(77568),g=t(60872),j=t(27530),y=t(28701),v=t(19993),b=t(23920);let N={logo:a.A,close:r.A,spinner:i.A,chevronLeft:n.A,chevronRight:l.A,menu:o.A,moon:d.A,sun:c.A,check:m.A,chevronsUpDown:u.A,add:x.A,chart:p.A,settings:h.A,qr:f.A,edit:g.A,grip:j.A,list:y.A,trash:v.A,copy:b.A}},9955:(e,s,t)=>{"use strict";t.d(s,{p:()=>n});var a=t(95155),r=t(12115),i=t(29602);let n=r.forwardRef((e,s)=>{let{className:t,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...n})});n.displayName="Input"},15785:(e,s,t)=>{"use strict";t.d(s,{Label:()=>d});var a=t(95155),r=t(12115),i=t(46195),n=t(31027),l=t(29602);let o=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.b,{ref:s,className:(0,l.cn)(o(),t),...r})});d.displayName=i.b.displayName},50745:(e,s,t)=>{"use strict";t.d(s,{bq:()=>u,eb:()=>f,gC:()=>h,l6:()=>c,yv:()=>m});var a=t(95155),r=t(12115),i=t(63409),n=t(51719),l=t(91902),o=t(98867),d=t(29602);let c=i.bL;i.YJ;let m=i.WT,u=r.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsxs)(i.l9,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...l,children:[r,(0,a.jsx)(i.In,{asChild:!0,children:(0,a.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=i.l9.displayName;let x=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.PP,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})});x.displayName=i.PP.displayName;let p=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.wn,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})});p.displayName=i.wn.displayName;let h=r.forwardRef((e,s)=>{let{className:t,children:r,position:n="popper",...l}=e;return(0,a.jsx)(i.ZL,{children:(0,a.jsxs)(i.UC,{ref:s,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...l,children:[(0,a.jsx)(x,{}),(0,a.jsx)(i.LM,{className:(0,d.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(p,{})]})})});h.displayName=i.UC.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.JU,{ref:s,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})}).displayName=i.JU.displayName;let f=r.forwardRef((e,s)=>{let{className:t,children:r,...n}=e;return(0,a.jsxs)(i.q7,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(i.VF,{children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})}),(0,a.jsx)(i.p4,{children:r})]})});f.displayName=i.q7.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.wv,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=i.wv.displayName},72581:(e,s,t)=>{"use strict";t.d(s,{d:()=>l});var a=t(95155),r=t(12115),i=t(12413),n=t(29602);let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.bL,{className:(0,n.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...r,ref:s,children:(0,a.jsx)(i.zi,{className:(0,n.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});l.displayName=i.bL.displayName},31641:(e,s,t)=>{"use strict";t.d(s,{Tabs:()=>l,TabsContent:()=>c,TabsList:()=>o,TabsTrigger:()=>d});var a=t(95155),r=t(12115),i=t(58629),n=t(29602);let l=i.bL,o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.B8,{ref:s,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r})});o.displayName=i.B8.displayName;let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.l9,{ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...r})});d.displayName=i.l9.displayName;let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.UC,{ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r})});c.displayName=i.UC.displayName},10371:(e,s,t)=>{"use strict";t.d(s,{T:()=>n});var a=t(95155),r=t(12115),i=t(29602);let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...r})});n.displayName="Textarea"},64725:(e,s,t)=>{"use strict";t.d(s,{q:()=>a});let a=new(t(16977)).E({defaultOptions:{queries:{staleTime:1e3,retry:1,refetchOnWindowFocus:!0}}})},63259:(e,s,t)=>{"use strict";t.d(s,{U:()=>r});var a=t(9806);function r(){return(0,a.createClientComponentClient)()}},29602:(e,s,t)=>{"use strict";t.d(s,{cn:()=>i});var a=t(43463),r=t(69795);function i(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}},82176:(e,s,t)=>{"use strict";t.d(s,{g:()=>r,v:()=>a});let a={vegetarian:"Vegetarian",vegan:"Vegan",gluten_free:"Gluten Free",dairy_free:"Dairy Free",nut_free:"Nut Free",halal:"Halal",kosher:"Kosher"},r={vegetarian:"\uD83E\uDD6C",vegan:"\uD83C\uDF31",gluten_free:"\uD83C\uDF3E",dairy_free:"\uD83E\uDD5B",nut_free:"\uD83E\uDD5C",halal:"\uD83C\uDF56",kosher:"✡️"}}},e=>{var s=s=>e(e.s=s);e.O(0,[1181,5593,9806,9125,5934,506,7641,7527,3326,547,410,3768,6977,7757,8441,1517,7358],()=>s(16708)),_N_E=e.O()}]);