(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4904],{28317:(e,r,s)=>{Promise.resolve().then(s.bind(s,13418))},13418:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>p});var a=s(95155),t=s(12115),l=s(547),i=s(63259),n=s(35007),d=s(39286),c=s(25488),o=s(9955),u=s(20853),m=s(29602),x=s(82176);function p(){let[e,r]=(0,t.useState)(""),[s,c]=(0,t.useState)({category:null,dietary:[],priceRange:{min:null,max:null}}),p=(0,i.U)(),{data:g,isLoading:h}=(0,l.I)({queryKey:["categories"],queryFn:async()=>{let{data:e}=await p.from("categories").select("*").order("name");return e||[]}}),{data:v,isLoading:j}=(0,l.I)({queryKey:["menuItems"],queryFn:async()=>{let{data:e}=await p.from("menu_items").select("*").order("name");return e||[]}});if((0,t.useEffect)(()=>{(async()=>{await p.from("views").insert([{page:"menu",created_at:new Date().toISOString()}])})()},[p]),h||j)return(0,a.jsx)(f,{});let y=null==g?void 0:g.map(e=>({...e,items:(null==v?void 0:v.filter(r=>r.category_id===e.id))||[]})).filter(e=>e.items.length>0),N=null==y?void 0:y.map(r=>({...r,items:r.items.filter(r=>{let a=""===e||r.name.toLowerCase().includes(e.toLowerCase())||r.description.toLowerCase().includes(e.toLowerCase()),t=!s.category||r.category_id===s.category,l=0===s.dietary.length||s.dietary.every(e=>{var s;return null===(s=r.dietary_info)||void 0===s?void 0:s.includes(e)}),i=(!s.priceRange.min||r.price>=s.priceRange.min)&&(!s.priceRange.max||r.price<=s.priceRange.max);return a&&t&&l&&i})})).filter(e=>e.items.length>0);return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,a.jsx)("div",{className:"container flex h-16 items-center",children:(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Our Menu"})})}),(0,a.jsxs)("main",{className:"container py-6",children:[(0,a.jsxs)("div",{className:"mb-8 space-y-4",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.A,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,a.jsx)(o.p,{placeholder:"Search menu...",value:e,onChange:e=>r(e.target.value),className:"pl-10"})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsxs)("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background",value:s.category||"",onChange:e=>c(r=>({...r,category:e.target.value||null})),children:[(0,a.jsx)("option",{value:"",children:"All Categories"}),null==g?void 0:g.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Dietary Preferences"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(x.v).map(e=>{let[r,t]=e;return(0,a.jsxs)(d.E,{variant:s.dietary.includes(r)?"default":"outline",className:"cursor-pointer",onClick:()=>{c(e=>({...e,dietary:e.dietary.includes(r)?e.dietary.filter(e=>e!==r):[...e.dietary,r]}))},children:[x.g[r]," ",t]},r)})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Price Range"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Min $"}),(0,a.jsx)(o.p,{type:"number",min:"0",step:"0.01",placeholder:"Min",value:s.priceRange.min||"",onChange:e=>c(r=>({...r,priceRange:{...r.priceRange,min:e.target.value?parseFloat(e.target.value):null}}))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Max $"}),(0,a.jsx)(o.p,{type:"number",min:"0",step:"0.01",placeholder:"Max",value:s.priceRange.max||"",onChange:e=>c(r=>({...r,priceRange:{...r.priceRange,max:e.target.value?parseFloat(e.target.value):null}}))})]})]})]}),e&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Found ",null==N?void 0:N.reduce((e,r)=>e+r.items.length,0)," items"]})]}),(null==y?void 0:y.length)===0?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("p",{className:"text-lg text-muted-foreground",children:"No menu items found"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Try adjusting your search"})]}):(0,a.jsx)("div",{className:"space-y-8",children:null==N?void 0:N.map(e=>(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold tracking-tight",children:e.name}),e.description&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]})}),(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.items.map(e=>(0,a.jsxs)(n.Zp,{className:(0,m.cn)(!e.is_available&&"opacity-60"),children:[e.image_url&&(0,a.jsx)("div",{className:"aspect-video w-full overflow-hidden rounded-t-lg",children:(0,a.jsx)("img",{src:e.image_url,alt:e.name,className:"h-full w-full object-cover"})}),(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(n.ZB,{children:e.name}),(0,a.jsx)(d.E,{variant:e.is_available?"default":"secondary",children:e.is_available?"Available":"Sold Out"})]}),(0,a.jsx)(n.BT,{children:e.description})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold",children:["$",e.price.toFixed(2)]}),e.dietary_info&&e.dietary_info.length>0&&(0,a.jsx)("div",{className:"flex gap-1",children:e.dietary_info.map(e=>(0,a.jsx)("span",{className:"inline-flex items-center rounded-full bg-muted px-2 py-1 text-xs",title:x.v[e],children:x.g[e]},e))})]}),e.portion_sizes&&e.portion_sizes.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Portion Sizes"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.portion_sizes.map(e=>(0,a.jsxs)(d.E,{variant:"outline",children:[e.name," - $",e.price.toFixed(2)]},e.id))})]})]})})]},e.id))})]},e.id))})]})]})}function f(){return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,a.jsx)("div",{className:"container flex h-16 items-center",children:(0,a.jsx)(c.E,{className:"h-8 w-32"})})}),(0,a.jsxs)("main",{className:"container py-6",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)(c.E,{className:"h-10 w-full"})}),(0,a.jsx)("div",{className:"space-y-8",children:[1,2,3].map(e=>(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsx)(c.E,{className:"h-8 w-48"}),(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(e=>(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(c.E,{className:"h-6 w-full"}),(0,a.jsx)(c.E,{className:"h-4 w-3/4"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)(c.E,{className:"h-8 w-24"})})]},e))})]},e))})]})]})}},39286:(e,r,s)=>{"use strict";s.d(r,{E:()=>n});var a=s(95155);s(12115);var t=s(31027),l=s(29602);let i=(0,t.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:r,variant:s,...t}=e;return(0,a.jsx)("div",{className:(0,l.cn)(i({variant:s}),r),...t})}},35007:(e,r,s)=>{"use strict";s.d(r,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>i,aR:()=>n,wL:()=>u});var a=s(95155),t=s(12115),l=s(29602);let i=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...t})});i.displayName="Card";let n=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...t})});n.displayName="CardHeader";let d=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)("h3",{ref:r,className:(0,l.cn)("font-semibold leading-none tracking-tight",s),...t})});d.displayName="CardTitle";let c=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)("p",{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",s),...t})});c.displayName="CardDescription";let o=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("p-6 pt-0",s),...t})});o.displayName="CardContent";let u=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",s),...t})});u.displayName="CardFooter"},9955:(e,r,s)=>{"use strict";s.d(r,{p:()=>i});var a=s(95155),t=s(12115),l=s(29602);let i=t.forwardRef((e,r)=>{let{className:s,type:t,...i}=e;return(0,a.jsx)("input",{type:t,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:r,...i})});i.displayName="Input"},25488:(e,r,s)=>{"use strict";s.d(r,{E:()=>l});var a=s(95155),t=s(29602);function l(e){let{className:r,...s}=e;return(0,a.jsx)("div",{className:(0,t.cn)("animate-pulse rounded-md bg-muted",r),...s})}},63259:(e,r,s)=>{"use strict";s.d(r,{U:()=>t});var a=s(9806);function t(){return(0,a.createClientComponentClient)()}},29602:(e,r,s)=>{"use strict";s.d(r,{cn:()=>l});var a=s(43463),t=s(69795);function l(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return(0,t.QP)((0,a.$)(r))}},20853:(e,r,s)=>{"use strict";s.d(r,{A:()=>a});let a=(0,s(82800).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},82176:(e,r,s)=>{"use strict";s.d(r,{g:()=>t,v:()=>a});let a={vegetarian:"Vegetarian",vegan:"Vegan",gluten_free:"Gluten Free",dairy_free:"Dairy Free",nut_free:"Nut Free",halal:"Halal",kosher:"Kosher"},t={vegetarian:"\uD83E\uDD6C",vegan:"\uD83C\uDF31",gluten_free:"\uD83C\uDF3E",dairy_free:"\uD83E\uDD5B",nut_free:"\uD83E\uDD5C",halal:"\uD83C\uDF56",kosher:"✡️"}},31027:(e,r,s)=>{"use strict";s.d(r,{F:()=>i});var a=s(43463);let t=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,l=a.$,i=(e,r)=>s=>{var a;if((null==r?void 0:r.variants)==null)return l(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:i,defaultVariants:n}=r,d=Object.keys(i).map(e=>{let r=null==s?void 0:s[e],a=null==n?void 0:n[e];if(null===r)return null;let l=t(r)||t(a);return i[e][l]}),c=s&&Object.entries(s).reduce((e,r)=>{let[s,a]=r;return void 0===a||(e[s]=a),e},{});return l(e,d,null==r?void 0:null===(a=r.compoundVariants)||void 0===a?void 0:a.reduce((e,r)=>{let{class:s,className:a,...t}=r;return Object.entries(t).every(e=>{let[r,s]=e;return Array.isArray(s)?s.includes({...n,...c}[r]):({...n,...c})[r]===s})?[...e,s,a]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)}}},e=>{var r=r=>e(e.s=r);e.O(0,[1181,5593,9806,7527,547,8441,1517,7358],()=>r(28317)),_N_E=e.O()}]);